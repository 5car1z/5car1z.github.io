<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="Linux System Administration"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="C.J. Scarlett" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>Pass - C.J. Scarlett</title><link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">C.J. Scarlett</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/topics" class="head-nav__link">Topics</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li><li class="head-nav__item"><a href="/misc" class="head-nav__link">Misc</a></li><li class="head-nav__item"><a href="/about" class="head-nav__link">About</a></li><li class="head-nav__item"><a href="/contact" class="head-nav__link">Contact</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2015-07-03T23:00:00.000Z" class="post__time">July 4, 2015</time><h1 class="post__title"><a href="/2015/07/04/notes-pass-unix-password-manager/">Pass Unix Password Manager</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/wMHZ8Jm.png" alt="GPG Lock"></p>
<h1 id="Preamble"><a href="#Preamble" class="headerlink" title="Preamble"></a>Preamble</h1><p>Pass is a command line password manager that follows the Unix philosopy of being small, simple, efficient, and compatible. It works by storing machine generated or user generated passwords in an encrypted GPG file. Each of which are organised into a named folder hierarchy. It can be manipulated through other command line tools if needed, and its contents easily transferred from system to system.</p>
<p>As indicated Pass operates with traditional command line options and arguments, and has commands for adding, editing, generating, and retrieving specific passwords. It also has built in features such as the ability to temporarily load passwords onto your system clipboard, and track password changes using version control such as Git.</p>
<p>All passwords expand from a root folder created with the path; <code>~/.password-store</code> and the hierarchy of descending passwords expands from there. You can if preferred interact with the password store using other ordinary Linux/Unix shell commands instead. Furthermore there’s provided Bash completion so that you can hit <code>TAB</code> to fill in paths and file names (Zsh completion is also available).</p>
<a id="more"></a>
<hr>
<h1 id="Step-1-–-Create-A-GPG-Key"><a href="#Step-1-–-Create-A-GPG-Key" class="headerlink" title="Step 1 – Create A GPG Key"></a>Step 1 – Create A GPG Key</h1><p>To begin using Pass you first need a GPG key.</p>
<p>You can create one by issuing the following command in a Linux Bash terminal on most distributions:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --gen-key</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note:</strong> On Arch Linux Install GPG first with: <code>sudo pacman -S gpg</code></p>
</blockquote>
<p>The initial prompt will appear and looks like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Please select what kind of key you want:</span><br><span class="line">   (1) RSA and RSA (default)</span><br><span class="line">   (2) DSA and Elgamal</span><br><span class="line">   (3) DSA (sign only)</span><br><span class="line">   (4) RSA (sign only)</span><br><span class="line">Your selection?</span><br></pre></td></tr></table></figure>
<p>Choose <code>1</code>  which will enable both encryption and signing.</p>
<p>The next prompt asks for the keysize:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RSA keys may be between 1024 and 4096 bits long.</span><br><span class="line">What keysize <span class="keyword">do</span> you want? (2048)</span><br></pre></td></tr></table></figure>
<p>Enter <code>2048</code> for the keysize. </p>
<p>Then read the next set of output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Please specify how long the key should be valid.</span><br><span class="line">         0 = key does not expire</span><br><span class="line">      &lt;n&gt;  = key expires <span class="keyword">in</span> n days</span><br><span class="line">      &lt;n&gt;w = key expires <span class="keyword">in</span> n weeks</span><br><span class="line">      &lt;n&gt;m = key expires <span class="keyword">in</span> n months</span><br><span class="line">      &lt;n&gt;y = key expires <span class="keyword">in</span> n years</span><br><span class="line">Key is valid <span class="keyword">for</span>? (0)</span><br></pre></td></tr></table></figure>
<p>Most people make their keys valid until infinity, which is the default option. If you do this don’t forget to revoke the key when you no longer use it.</p>
<p>Enter <code>0</code> for infinity, or however long you wish.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">You need a user ID to identify your key; the software constructs the user ID</span><br><span class="line">from the Real Name, Comment and E-mail Address <span class="keyword">in</span> this form:</span><br><span class="line">    <span class="string">"Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;"</span></span><br></pre></td></tr></table></figure>
<p>Your next input from here should be your real name:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Real name:</span><br></pre></td></tr></table></figure>
<p>Followed by your email address you wish to associate the key with (you can add more later!) : </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail address:</span><br></pre></td></tr></table></figure>
<p>Here you can give the key a description that fits its purpose:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Comment:</span><br></pre></td></tr></table></figure>
<p>This part is important and is the passphrase that you’ll use to open/decrypt your key that is generated. You can make it memorable but it’s essential that this follows a few precepts to make it strong and considered “secure”.</p>
<blockquote>
<p><strong>For Example:</strong> Contains symbols, contains upper &amp; lower case characters, some numbers, no dictionary words, etc.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">You need a Passphrase to protect your secret key.</span><br><span class="line"></span><br><span class="line">Enter passphrase:</span><br></pre></td></tr></table></figure>
<p>As the next prompt says type on the keyboard, move the mouse, and perform some actions that read/write to the machine’s hard drives. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">We need to generate a lot of random bytes. It is a good idea to perform</span><br><span class="line">some other action (<span class="built_in">type</span> on the keyboard, move the mouse, use the</span><br><span class="line">disks) during the prime generation; this gives the random number</span><br><span class="line">generator a better chance to gain enough entropy.</span><br></pre></td></tr></table></figure>
<p>If this is not enough or does not seem to update and complete after sometime, open up a new shell session and install the <a href="https://wiki.archlinux.org/index.php/Haveged" target="_blank" rel="external"><em>haveged</em></a> package:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install haveged</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note:</strong> There are several other ways of generating more entrophy (some more appropriate than others) and the best method will differ from setup to setup.</p>
</blockquote>
<p>The process should now continue and include your new key’s location, value, and details. </p>
<p>With the main line reading:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public and secret key created and signed.</span><br></pre></td></tr></table></figure>
<p>One more step you can complete <strong>locally</strong> is to set your key as the default key by entering this line in your <code>~/.bashrc</code> file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> GPGKEY=&lt;key value&gt;</span><br></pre></td></tr></table></figure>
<p>Now restart the <code>gpg-agent</code> with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ killall -q gpg-agent</span><br><span class="line">$ <span class="built_in">eval</span> $(gpg-agent --daemon)</span><br></pre></td></tr></table></figure>
<p>Then source your <code>.bashrc</code> again via:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-2-–-Creating-A-Revocation-Certificate"><a href="#Step-2-–-Creating-A-Revocation-Certificate" class="headerlink" title="Step 2 – Creating A Revocation Certificate"></a>Step 2 – Creating A Revocation Certificate</h1><p>A revocation certificate must be generated to revoke your public key if your private key becomes compromised in any way.</p>
<p>It is recommended to create a revocation certificate when you create your key. </p>
<blockquote>
<p><strong>Note:</strong> Keep your revocation certificate on a medium that you can safely secure, like a thumb drive in a locked box. The revocation key may be printed and/or stored as a file. Take care to safeguard your revocation key.</p>
</blockquote>
<p>To create a revocation certificate for your key carry out these two commands. </p>
<p>This first statement will create an environment variable in Bash containing the GPG key value you just created. Note that if you have other keys previously generated the value extracted with this command may be of a different key, this filters on the first key listed by the <code>gpg</code> program:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> GPGKEY=<span class="string">"<span class="variable">$(gpg -K | awk 'NR==3 &#123;print $2&#125;' | sed 's/2048R\///g')</span>"</span></span><br></pre></td></tr></table></figure>
<p>Now we create the revocation certificate by passing the <code>$GPGKEY</code> variable we defined:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --output revoke.asc --gen-revoke <span class="variable">$GPGKEY</span></span><br></pre></td></tr></table></figure>
<p>Enter <code>0</code> for this multiple choice list.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Create a revocation certificate <span class="keyword">for</span> this key? (y/N) y</span><br><span class="line">Please select the reason <span class="keyword">for</span> the revocation:</span><br><span class="line">  0 = No reason specified</span><br><span class="line">  1 = Key has been compromised</span><br><span class="line">  2 = Key is superseded</span><br><span class="line">  3 = Key is no longer used</span><br><span class="line">  Q = Cancel</span><br><span class="line">(Probably you want to select 1 here)</span><br></pre></td></tr></table></figure>
<p>Enter something along the lines of - “Will be used if/when this key is ever compromised.”</p>
<p>This also needs ending with a new line.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Enter an optional description; end it with an empty line:</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<p>Now enter your key’s passphrase </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">You need a passphrase to unlock the secret key <span class="keyword">for</span></span><br><span class="line">user:</span><br></pre></td></tr></table></figure>
<p>The resultant message seen here means you successfully created your revocation certificate. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ASCII armoured output forced.</span><br><span class="line">Revocation certificate created.</span><br><span class="line"></span><br><span class="line">Please move it to a medium <span class="built_in">which</span> you can hide away; <span class="keyword">if</span> Mallory gets</span><br><span class="line">access to this certificate he can use it to make your key unusable.</span><br><span class="line">It is smart to <span class="built_in">print</span> this certificate and store it away, just <span class="keyword">in</span> <span class="keyword">case</span></span><br><span class="line">your media become unreadable.  But have some caution:  The <span class="built_in">print</span> system of</span><br><span class="line">your machine might store the data and make it available to others!</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note:</strong> Mallory being a malicious attacker (less commonly called Trudy, an intruder.); unlike the passive Eve, this one is the active man-in-the-middle attacker who can modify messages, substitute his/her own messages, replay old messages, and so on. – <a href="https://en.wikipedia.org/wiki/Alice_and_Bob#Cast_of_characters" target="_blank" rel="external">Source</a></p>
</blockquote>
<p>As indicated backup somewhere safe the <code>revoke.asc</code> file, in case you should ever need it in the future to invalidate your private key.  </p>
<p>It can be found in your current working directory where you executed the initial <code>gpg --output</code> command. </p>
<hr>
<h1 id="Step-3-–-Installing-Pass"><a href="#Step-3-–-Installing-Pass" class="headerlink" title="Step 3 – Installing Pass"></a>Step 3 – Installing Pass</h1><h2 id="Arch-Linux"><a href="#Arch-Linux" class="headerlink" title="Arch Linux"></a>Arch Linux</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S pass</span><br></pre></td></tr></table></figure>
<h2 id="Debian-Ubuntu"><a href="#Debian-Ubuntu" class="headerlink" title="Debian / Ubuntu"></a>Debian / Ubuntu</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install pass</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-4-–-Initialising-Pass"><a href="#Step-4-–-Initialising-Pass" class="headerlink" title="Step 4 – Initialising Pass"></a>Step 4 – Initialising Pass</h1><p>After installing Pass you need to initialise it with your GPG key from the previous steps.</p>
<p>In the same shell session as earlier use the environment variable <code>$GPGKEY</code> and supply it to Pass via the <code>init</code> parameter: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass init <span class="variable">$GPGKEY</span></span><br></pre></td></tr></table></figure>
<p>This message will follow:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir: created directory ‘/home/scarlz/.password-store’</span><br><span class="line">Password store initialized <span class="keyword">for</span> &lt;KEYVALUE&gt;.</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-5-–-Adding-Password-Entries"><a href="#Step-5-–-Adding-Password-Entries" class="headerlink" title="Step 5 – Adding Password Entries"></a>Step 5 – Adding Password Entries</h1><p>To add a new password entry to Pass, follow this next code snippet’s syntax:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass insert email/proton-mail/count.elmsley@protonmail.com</span><br></pre></td></tr></table></figure>
<p>This example was for an entry of an email address account in a descriptive hierarchy.</p>
<p>The prompt generated asks for the password that is to be associated and stored with this entry</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir: created directory ‘/home/scarlz/.password-store/email’</span><br><span class="line">mkdir: created directory ‘/home/scarlz/.password-store/email/gmail’</span><br><span class="line">Enter password <span class="keyword">for</span> email/proton-mail/count.elmsley@protonmail.com:</span><br><span class="line">Retype password <span class="keyword">for</span> email/proton-mail/count.elmsley@protonmail.com:</span><br></pre></td></tr></table></figure>
<p>The password is then read encrypted, and placed in <code>~/.password-store</code> .</p>
<p>As the data stored in the encrypted files are plain text you can add any other details that go with an entry using the <code>-m</code> parameter. This creates the password with a multi-line entry where the first field is usually the password and the rest of the lines are the extra details such as usernames, emails addresses, etc. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass insert -m email/proton-mail/count.elmsley@protonmail.com</span><br></pre></td></tr></table></figure>
<p>Press <code>CTRL</code> + <code>D</code> to quit and confirm the entry when in multi-line mode. </p>
<p>To use Pass to generate a password for an entry on your behalf, use the <code>generate</code> option:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass generate archlinux.org/wiki/username &lt;n&gt;</span><br></pre></td></tr></table></figure>
<p>The <code>&lt;n&gt;</code> represents the number of characters you want the password to be in total. Replace it with a value like <code>16</code> to make the password lengthy enough. </p>
<p>There are some other options you can toggle like <code>-n</code> to exclude symbols from the password, and <code>-c</code> to send the password straight to the clipboard, and not print it to standard out once it’s created. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass generate -n -c archlinux.org/wiki/username 16</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-6-–-Displaying-amp-Accessing-Passwords"><a href="#Step-6-–-Displaying-amp-Accessing-Passwords" class="headerlink" title="Step 6 – Displaying &amp; Accessing Passwords"></a>Step 6 – Displaying &amp; Accessing Passwords</h1><p>The most basic and easiest way of displaying your password hierarchy tree is by running the program without any extra options:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Password Store</span><br><span class="line">├── Business</span><br><span class="line">│   ├── some-silly-business-site.com</span><br><span class="line">│   └── another-business-site.net</span><br><span class="line">├── Email</span><br><span class="line">│   ├── user@gmail.com</span><br><span class="line">│   └── zx2c4.com</span><br><span class="line">└── France</span><br><span class="line">    ├── banking</span><br><span class="line">    ├── freebox</span><br><span class="line">    └── mobilephone</span><br></pre></td></tr></table></figure>
<p>If you want to single out certain categories or sections of the tree use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass ls Email/</span><br></pre></td></tr></table></figure>
<p>Which shows only:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">├── Email</span><br><span class="line">│   ├── user@gmail.com</span><br><span class="line">│   └── zx2c4.com</span><br></pre></td></tr></table></figure>
<p>To actually decrypt and retrieve a password, call the program and provide the path to the password:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass Email/user@gmail.com</span><br></pre></td></tr></table></figure>
<p>You will now have to enter or unlock your GPG key to see and display the password.</p>
<p>Instead of displaying the password in the terminal you can copy it to the clipboard for 45 seconds via <code>-c</code> :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass -c Email/user@gmail.com</span><br></pre></td></tr></table></figure>
<p>Which gives the message below and let’s you paste the password into any websites, forms, etc:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Copied Email/user@gmail.com to clipboard. Will clear <span class="keyword">in</span> 45 seconds.</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-7-–-Removing-amp-Editing-Password-Entries"><a href="#Step-7-–-Removing-amp-Editing-Password-Entries" class="headerlink" title="Step 7 – Removing &amp; Editing Password Entries"></a>Step 7 – Removing &amp; Editing Password Entries</h1><p>You many need to remove passwords in the manager from time to time. This is done with the familiarly named <code>rm</code> and the path to the password file you want to remove. </p>
<p>Here an example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass rm email/proton-mail/count.elmsley@protonmail.com</span><br></pre></td></tr></table></figure>
<p>To remove the folders in the process of the deletion include <code>-r</code> (recursively) in the command: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass rm -r email/proton-mail/count.elmsley@protonmail.com</span><br></pre></td></tr></table></figure>
<p>Normally there is a prompt to make sure you are certain you want to delete the password, this can be removed by using <code>-f</code> which is short for ‘force” :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass rm <span class="_">-f</span> email/proton-mail/count.elmsley@protonmail.com</span><br></pre></td></tr></table></figure>
<p>To change an existing password and edit it replace <code>rm</code> with <code>edit</code> like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass edit email/proton-mail/count.elmsley@protonmail.com</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-8-–-Git-Version-Control"><a href="#Step-8-–-Git-Version-Control" class="headerlink" title="Step 8 – Git Version Control"></a>Step 8 – Git Version Control</h1><p>Pass has support for Git tracking which would be ideal for private Git repositories but also in theory “safe” to put on a public service like Github, as the files are of course encrypted with GPG. Depending upon the strength of your passphrase too.</p>
<p>Make sure you have <code>git</code> installed on your system for this next section:</p>
<h2 id="Arch-Linux-1"><a href="#Arch-Linux-1" class="headerlink" title="Arch Linux"></a>Arch Linux</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S git</span><br></pre></td></tr></table></figure>
<h2 id="Debian-Ubuntu-1"><a href="#Debian-Ubuntu-1" class="headerlink" title="Debian / Ubuntu"></a>Debian / Ubuntu</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install git</span><br></pre></td></tr></table></figure>
<p>Here’s how the Git functionality works with pass:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /<span class="variable">$USER</span>/.password-store</span><br></pre></td></tr></table></figure>
<p>Initialise the repository through pass:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass git init</span><br></pre></td></tr></table></figure>
<p>Add your remote repo address and name:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass git remote add origin git-repo-address.com:repo-name</span><br></pre></td></tr></table></figure>
<p>Set Git to push with these options:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass git push -u --all</span><br></pre></td></tr></table></figure>
<p>You can now add, edit, remove, and make changes then push them to your remote repository with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass git push</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-9-–-Shell-Environment-Variables"><a href="#Step-9-–-Shell-Environment-Variables" class="headerlink" title="Step 9 – Shell Environment Variables"></a>Step 9 – Shell Environment Variables</h1><p>Here are three variables I found that seem potentially the most useful, should you ever need to fiddle with their functionality (there are others though).</p>
<p><code>PASSWORD_STORE_DIR</code><br>Overrides the default password storage directory.</p>
<p><code>$PASSWORD_STORE_GIT</code><br>Overrides the default root of the git repository, which is helpful if PASSWORD_STORE_DIR is temporarily set to a sub-directory of the default password store.</p>
<p><code>$PASSWORD_STORE_CLIP_TIME</code><br>Specifies the number of seconds to wait before restoring the clipboard, by default 45 seconds.</p>
<hr>
<h1 id="Step-10-–-Exporting-amp-Importing-Keys"><a href="#Step-10-–-Exporting-amp-Importing-Keys" class="headerlink" title="Step 10 – Exporting &amp; Importing Keys"></a>Step 10 – Exporting &amp; Importing Keys</h1><p>To transfer and move around a pass GPG key to other systems, follow these steps for a rudimentary solution.</p>
<h2 id="Public-Key"><a href="#Public-Key" class="headerlink" title="Public Key"></a>Public Key</h2><p>To see the current public GPG keys you have setup and active use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --list-keys</span><br></pre></td></tr></table></figure>
<p>One of these will show the ID and details of your Pass key, use the key ID value to export the public key into a file with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg -ao pass_public.key --export &lt;key ID value&gt;</span><br></pre></td></tr></table></figure>
<p>Then transfer the generated <code>pass_public.key</code> onto your new system, and use the <code>--import</code> option to add it to GPG.</p>
<p>This is done with the command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --import pass_public.key</span><br></pre></td></tr></table></figure>
<h2 id="Private-Key"><a href="#Private-Key" class="headerlink" title="Private Key"></a>Private Key</h2><p>To see the current private GPG keys you have setup and active use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --list-secret-keys</span><br></pre></td></tr></table></figure>
<p>Like in the public key section, export the private key into a file with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg -ao pass_private.key --export-secret-keys</span><br></pre></td></tr></table></figure>
<p>Then transfer the generated <code>pass_private.key</code> onto your new system, and use the <code>--import</code> option to add it to GPG.</p>
<p>This is done with the command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --import pass_private.key</span><br></pre></td></tr></table></figure>
<h2 id="Trust-Error"><a href="#Trust-Error" class="headerlink" title="Trust Error"></a>Trust Error</h2><p>Sometimes after importing the key onto a new system you may get an error message similiar to:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg: There is no assurance this key belongs to the named user</span><br></pre></td></tr></table></figure>
<p>Which appers when trying to encrypt a new file or edit an existing Pass entry.</p>
<p>If so use GPG to edit the key.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --edit-key &lt;Key Value&gt;</span><br></pre></td></tr></table></figure>
<p>At the prompt type:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; trust</span><br></pre></td></tr></table></figure>
<p>Then from the numerical choices displayed enter a suitable value. The highest option <code>5</code> is fine if you know that this key is definetly your own and not a potentially unsafe key.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Please decide how far you trust this user to correctly verify other users<span class="string">' keys</span><br><span class="line">(by looking at passports, checking fingerprints from different sources, etc.)</span><br><span class="line"></span><br><span class="line">1 = I don'</span>t know or won<span class="string">'t say</span><br><span class="line">2 = I do NOT trust</span><br><span class="line">3 = I trust marginally</span><br><span class="line">4 = I trust fully</span><br><span class="line">5 = I trust ultimately</span><br><span class="line">m = back to the main menu</span><br><span class="line"></span><br><span class="line">Your decision?</span></span><br></pre></td></tr></table></figure>
<p>The operation you were trying to perform with Pass should now work as they key is trusted. Enter <code>quit</code> to leave the gpg prompt.</p>
<hr>
<p>On a final note the community around Pass has produced a cross-platform GUI client, an Android app, an iOS app, a Firefox plugin, a Windows client, a dmenu script, OS X integration, and even an emacs package.</p>
<p>So look into these if they sound interesting: </p>
<blockquote>
<p><a href="https://github.com/zx2c4/password-store" target="_blank" rel="external">Pass on Github</a></p>
</blockquote>
<hr>
<p><strong>More Information</strong></p>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/GnuPG" target="_blank" rel="external">ArchWiki - GPG Page</a> - ArchWiki details for Pass.</li>
<li><a href="https://help.ubuntu.com/community/GnuPrivacyGuardHowto" target="_blank" rel="external">GNU Privacy Guard How To</a> – An Ubuntu community guide on setting up GPG keys. </li>
<li><a href="http://www.passwordstore.org/" target="_blank" rel="external">Official Password Store Page</a> – The official site dedicated to Pass.</li>
<li><a href="https://www.gnupg.org/gph/en/manual.html#AEN26" target="_blank" rel="external">GPG Official Manual</a> - The manual provided from the offical GNU website. </li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-use-gpg-to-encrypt-and-sign-messages-on-an-ubuntu-12-04-vps" target="_blank" rel="external">How To Use GPG to Encrypt and Sign Messages on an Ubuntu 12.04 VPS</a> - A Digital Ocean tutorial on using GPG to send encrypted messages. </li>
<li><a href="http://serverfault.com/questions/214605/gpg-not-enough-entropy" target="_blank" rel="external">Not Enough Entropy Error</a> - A thread around generating entropy.  </li>
<li><a href="http://blog.sanctum.geek.nz/linux-crypto-passwords/" target="_blank" rel="external">Blog - Linux Crypto Passwords</a> - Another similar blog post on Pass. </li>
</ul>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Git/" class="post__tag__link">Git</a></li><li class="post__tag__item"><a href="/tags/Pass/" class="post__tag__link">Pass</a></li><li class="post__tag__item"><a href="/tags/GPG/" class="post__tag__link">GPG</a></li></ul><a href="/2015/07/04/notes-pass-unix-password-manager/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2018 Scarlz</div><menu class="page-menu u-fr"><li class="page-menu__item"><span title="Previous" class="page-menu__link icon-arrow-left page-menu__link--disabled"></span></li><li class="page-menu__item"><span title="Next" class="page-menu__link icon-arrow-right page-menu__link--disabled"></span></li></menu></footer><script>(function(h,g,l,k,j,i){j=h.createElement(g),i=h.getElementsByTagName(g)[0],
j.src="//"+l+".disqus.com/"+k+".js",i.parentNode.insertBefore(j,i)})
(document,"script","totts","count");
</script></body></html>