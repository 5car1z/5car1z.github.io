<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="Linux System Administration"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="atom.xml" title="C.J. Scarlett" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>Screen - C.J. Scarlett</title><link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">C.J. Scarlett</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/trades" class="head-nav__link">Topics</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li><li class="head-nav__item"><a href="/work" class="head-nav__link">Work</a></li><li class="head-nav__item"><a href="/about" class="head-nav__link">About</a></li><li class="head-nav__item"><a href="/contact" class="head-nav__link">Contact</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2015-10-04T23:00:00.000Z" class="post__time">October 5, 2015</time><h1 class="post__title"><a href="/2015/10/05/minecraft-server-debian/">Installing Minecraft Server on Debian 8</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/eHeujd5.png" alt="Debian Logo"></p>
<h1 id="Preamble"><a href="#Preamble" class="headerlink" title="Preamble"></a>Preamble</h1><p>Covers the general process of setting up a basic Minecraft server from start to finish. Along with how to configure some of the server’s properties and user permissions. </p>
<ul>
<li>Uses Java (OpenJDK in this case) as a dependency. </li>
<li>Requires GNU Screen to maintain a shell session.</li>
<li>The Minecraft game client is necessary to test access to the server. </li>
<li>Suitable Server Hardware specifications are addressed. </li>
</ul>
<blockquote>
<p><a href="https://minecraft.net/" target="_blank" rel="external">Minecraft’s Official Website</a></p>
</blockquote>
<a id="more"></a>
<hr>
<h1 id="1-–-Update-System-Packages"><a href="#1-–-Update-System-Packages" class="headerlink" title="1 – Update System Packages"></a>1 – Update System Packages</h1><p>Ensure the packages are up to date on the system with the command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update &amp;&amp; sudo apt-get upgrade</span><br></pre></td></tr></table></figure>
<p>Confirm the action by entering <code>y</code> for any prompts in this step.</p>
<hr>
<h1 id="2-—-Install-Screen"><a href="#2-—-Install-Screen" class="headerlink" title="2 — Install Screen"></a>2 — Install Screen</h1><p>Screen is used to keep the Minecraft server running in a persistent shell session, it also allows us to disconnect or re-attach to the session when needed.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install screen</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="3-–-Install-Open-JDK"><a href="#3-–-Install-Open-JDK" class="headerlink" title="3 – Install Open JDK"></a>3 – Install Open JDK</h1><p>Install the open JDK platform with Debian’s package manager:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install openjdk-7-jre-headless</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note:</strong> “It is recommended that Linux users avoid using OpenJDK 6 for server hosting, as it has been known to cause issues.”</p>
</blockquote>
<hr>
<h1 id="4-–-Create-Dedicated-User"><a href="#4-–-Create-Dedicated-User" class="headerlink" title="4 – Create Dedicated User"></a>4 – Create Dedicated User</h1><p>Add a user with a suitable name who’ll run and store the server software in its <code>home</code> directory:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo adduser minecraft</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="5-–-iptables-Firewall"><a href="#5-–-iptables-Firewall" class="headerlink" title="5 – iptables Firewall"></a>5 – iptables Firewall</h1><p>If using <code>iptables</code> you’ll need to allow access on the Minecraft server’s TCP port <code>25565</code> for incoming connecting clients. </p>
<p>Here is one command to add this, tweak it to your own needs and firewall setup:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -I INPUT 3 -p tcp --dport 25565 -j ACCEPT -m comment --comment <span class="string">"allow connections on port 25565 Minecraft server"</span></span><br></pre></td></tr></table></figure>
<p>Remember to re-save your updated rules (IPv4 in my case). </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables-save &gt; /etc/iptables/rules.v4</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="6-–-Download-Minecraft-Server-Software"><a href="#6-–-Download-Minecraft-Server-Software" class="headerlink" title="6 – Download Minecraft Server Software"></a>6 – Download Minecraft Server Software</h1><p>SSH to the new <code>minecraft</code> user (or whatever you named them). </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh minecraft@your.vps.ip.address</span><br></pre></td></tr></table></figure>
<p>Download the latest version of the Minecraft server <em>jar</em> file. </p>
<p>The current version number is <code>1.8.8</code> at the time of writing this: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -v https://s3.amazonaws.com/Minecraft.Download/versions/1.8.8/minecraft_server.1.8.8.jar</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note:</strong> Amend your command to include the version number that is currently in release. Previously found at <a href="https://minecraft.net/download" target="_blank" rel="external">https://minecraft.net/download</a> towards the bottom of the page. </p>
</blockquote>
<hr>
<h1 id="7-–-Create-Minecraft-Executable-Script"><a href="#7-–-Create-Minecraft-Executable-Script" class="headerlink" title="7 – Create Minecraft Executable Script"></a>7 – Create Minecraft Executable Script</h1><p>With a text editor create a shell script named something similar to the following:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim run-minecraft-server.sh</span><br></pre></td></tr></table></figure>
<p>In the newly created script add the code in the next snippet, replacing the two <code>java</code> parameter values with your own preferred memory usage values. </p>
<figure class="highlight bash"><figcaption><span>~/run-minecraft-server.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span><br><span class="line"></span></span><br><span class="line">BINDIR=$(dirname <span class="string">"<span class="variable">$(readlink -fn "$0")</span>"</span>)</span><br><span class="line"><span class="built_in">cd</span> <span class="string">"<span class="variable">$BINDIR</span>"</span></span><br><span class="line"></span><br><span class="line">java -Xmx1024M -Xms1024M -jar minecraft_server.*.*.*.jar nogui</span><br></pre></td></tr></table></figure>
<p>See the next image for recommendations on server requirements from the official Minecraft wiki, to determine your values.</p>
<p><img src="http://i.gyazo.com/252e38114f335e58904cda95b00e96f8.png" alt="Minecraft Wiki Server Requirements"></p>
<blockquote>
<p>-<strong>Note:</strong> <code>Xms256M</code> dictates the lowest amount of system memory the Minecraft server will consume, and <code>Xmx512M</code> specifies the upper limit of server memory it can max out at.</p>
</blockquote>
<p>Save your changes to the script and exit back to the command line. </p>
<p>Finally in this step use <code>chmod</code> to make the previous script executable. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x run-minecraft-server.sh</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="8-–-Run-Executable-Script"><a href="#8-–-Run-Executable-Script" class="headerlink" title="8 – Run Executable Script"></a>8 – Run Executable Script</h1><p>Run it from the command line by adding the <code>./</code> prefix. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./run-minecraft-server.sh</span><br></pre></td></tr></table></figure>
<p>You’ll see the following output if the script has been written correctly:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[09:10:50] [Server thread/INFO]: Starting minecraft server version 1.8.8</span><br><span class="line">[09:10:50] [Server thread/WARN]: To start the server with more ram, launch it as <span class="string">"java -Xmx1024M -Xms1024M -jar minecraft_server.jar"</span></span><br><span class="line">[09:10:50] [Server thread/INFO]: Loading properties</span><br><span class="line">[09:10:50] [Server thread/WARN]: server.properties does not exist</span><br><span class="line">[09:10:50] [Server thread/INFO]: Generating new properties file</span><br><span class="line">[09:10:50] [Server thread/WARN]: Failed to load eula.txt</span><br><span class="line">[09:10:50] [Server thread/INFO]: You need to agree to the EULA <span class="keyword">in</span> order to run the server. Go to eula.txt <span class="keyword">for</span> more info.</span><br><span class="line">[09:10:50] [Server thread/INFO]: Stopping server</span><br><span class="line">[09:10:50] [Server Shutdown Thread/INFO]: Stopping server</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="9-–-Agree-to-EULA"><a href="#9-–-Agree-to-EULA" class="headerlink" title="9 – Agree to EULA"></a>9 – Agree to EULA</h1><p>The EULA you must agree to is located in the same user’s home directory. </p>
<p>Again using a text editor open it for writing:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim eula.txt</span><br></pre></td></tr></table></figure>
<p>Set the <code>eula</code> directive  to <code>true</code> like in the example below:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#By changing the setting below to TRUE you are indicating your agreement to our EULA (https://account.mojang.com/documents/minecraft_eula).</span></span><br><span class="line"><span class="comment">#Mon Oct 05 09:10:50 EDT 2015</span></span><br><span class="line">eula=<span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>Save changes and exit the text editor. </p>
<p>Back on the command line begin a screen session by providing the full path to your executable script:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ screen ./run-minecraft-server.sh</span><br></pre></td></tr></table></figure>
<p>The server now runs and begins to generate the in-game content. </p>
<hr>
<h1 id="10-–-Client-Connections"><a href="#10-–-Client-Connections" class="headerlink" title="10 – Client Connections"></a>10 – Client Connections</h1><p>The server should now be running continually and Minecraft clients can connect to it. </p>
<blockquote>
<p>Connect with a Minecraft client to the server IP. </p>
</blockquote>
<p>Everything should be functioning as intended, and the server is ready for use!</p>
<p>You can leave and detach from the screen session by pressing <code>CTRL</code> + <code>d</code> then <code>a</code> on your keyboard, back in the terminal. </p>
<hr>
<h1 id="11-–-Administration"><a href="#11-–-Administration" class="headerlink" title="11 – Administration"></a>11 – Administration</h1><p>Logged in once again as the Linux user <code>minecraft</code> or whatever you chose to call your dedicated user, re-attach to the minecraft <em>screen</em> session from earlier with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ screen -r</span><br></pre></td></tr></table></figure>
<p>Shut down the server which saves player created progress and the in-game content.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/stop</span><br></pre></td></tr></table></figure>
<p>Now the server has been stopped you can begin to play around with its file structure. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ls</span><br></pre></td></tr></table></figure>
<p>There are several key files in in regards to maintaining the server, and two other directories to consider. </p>
<blockquote>
<p>Any time you modify these files while the game is running, you will need to stop and restart the server for the changes to take effect.</p>
</blockquote>
<hr>
<h2 id="ops-json"><a href="#ops-json" class="headerlink" title="ops.json"></a>ops.json</h2><p>This file named <code>ops.json</code> contains usernames of players that have <em>ops</em> privileges on your server.</p>
<p>It is empty until you add player usernames however.</p>
<blockquote>
<p><strong>Warning:</strong> Players listed in this file can change their game mode, input certain commands, and ban or unban other players from the server. </p>
</blockquote>
<p>You can either add user details directly to this <code>.json</code> file, if you understand the formatting involved. </p>
<p>Or create a completely separate <code>ops.txt</code> file with a list of usernames inside. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim ~/ops.txt</span><br></pre></td></tr></table></figure>
<p>The text file you create is then converted into the <code>ops.json</code> file from earlier once the server is next booted.</p>
<p>It is recommended that you follow this method if you are unfamiliar with JSON formatting.   </p>
<p>For more information on ops or <em>operators</em> in Minecraft click the next link:</p>
<blockquote>
<p><a href="http://minecraft.gamepedia.com/Operator" target="_blank" rel="external">Minecraft Wiki Operators Page</a></p>
</blockquote>
<hr>
<h2 id="server-properties"><a href="#server-properties" class="headerlink" title="server.properties"></a>server.properties</h2><p>The bulk of in-game settings and properties are stored in the following text file. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim ~/server.properties</span><br></pre></td></tr></table></figure>
<p>There are a longer list of properties you can add to the file that are listed at this next URL: </p>
<blockquote>
<p><a href="]http://minecraft.gamepedia.com/Server.properties">Minecraft Wiki Server.properties Page</a></p>
</blockquote>
<hr>
<h2 id="banned-ips-json-amp-banned-players-json"><a href="#banned-ips-json-amp-banned-players-json" class="headerlink" title="banned-ips.json &amp; banned-players.json"></a>banned-ips.json &amp; banned-players.json</h2><p>In order to ban an IP address from connecting to the server, the full IP address must be specified; - impartial addresses or wildcards are not supported here. </p>
<p>Any players who are banned in this manner see “Your IP address is banned from this server!” when attempting to connect through the client. </p>
<p>In-game an operator can instead use  “/ban-ip ipaddress”, where “ipaddress” is the IP address of the user they wish to ban. To remove and undo a ban, the operator can issue “pardon-ip ipaddress”. Or if they have access, edit the server’s <code>banned-ips.json</code> file.</p>
<hr>
<h1 id="white-list-json"><a href="#white-list-json" class="headerlink" title="white-list.json"></a>white-list.json</h1><p>This essentially can be used to make a server private to a select group of clients. To do so add their usernames to the file <code>white-list.txt</code>. You will need to edit the <code>server.properties</code> file, changing <code>white-list=false</code> to <code>white-list=true</code> .</p>
<p>Alongside this you can also use this file to change the public message on your Minecraft server. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim ~/white-list.txt</span><br></pre></td></tr></table></figure>
<p>Edit <code>motd=A Minecraft Server</code> to show the name or phrase that you want to display publicly to clients. </p>
<hr>
<h2 id="World-Directories"><a href="#World-Directories" class="headerlink" title="World Directories"></a>World Directories</h2><p>This directory and its subdirectories contain map and player data for the <em>realms</em> in your game. </p>
<p>It is worth backing up these directories regularly so that you can revert to previous versions in case of in-game mishaps or unwanted trolls. These directories may be in different locations, depending on which version of the Minecraft server you installed. </p>
<p>Also note that the directories for the <em>nether</em> and <em>the end</em> will not be created until a player visits the area at least once on the server.</p>
<hr>
<h2 id="Log-Directory"><a href="#Log-Directory" class="headerlink" title="Log Directory"></a>Log Directory</h2><p>Anything and everything that goes on is stored in the <code>logs</code> directory. It’s worth reviewing it’s contents every now and then or if any technical problems arise. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ less ~/logs/latest.log</span><br></pre></td></tr></table></figure>
<p>Previous logs are compressed automatically as and when needed.</p>
<hr>
<h2 id="Console-Commands"><a href="#Console-Commands" class="headerlink" title="Console Commands"></a>Console Commands</h2><p>The link below contains a table that summarizes all available commands. Some of which have been mentioned here, but most of which have not.  </p>
<blockquote>
<p><a href="http://minecraft.gamepedia.com/Commands#Summary_of_commands" target="_blank" rel="external">Minecraft Wiki Commands Page</a></p>
</blockquote>
<hr>
<p><strong>More Information</strong></p>
<ul>
<li><a href="https://www.linode.com/docs/applications/game-servers/minecraft-on-linode-with-ubuntu-12-04" target="_blank" rel="external">Minecraft on Linode </a></li>
<li><a href="http://minecraft.gamepedia.com/Server/Requirements/Dedicated" target="_blank" rel="external">Minecraft Wiki Server Requirement Pages</a></li>
<li><a href="http://minecraft.gamepedia.com/Server" target="_blank" rel="external">Minecraft Wiki Server Maintenance Page</a></li>
</ul>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Debian/" class="post__tag__link">Debian</a></li><li class="post__tag__item"><a href="/tags/Screen/" class="post__tag__link">Screen</a></li><li class="post__tag__item"><a href="/tags/Java/" class="post__tag__link">Java</a></li></ul><a href="/2015/10/05/minecraft-server-debian/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-10-01T23:00:00.000Z" class="post__time">October 2, 2015</time><h1 class="post__title"><a href="/2015/10/02/terraria-tdsm-server/">Installing TDSM Terraria Server Mod on Debian 8</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/eHeujd5.png" alt="Debian Logo"></p>
<h1 id="Preamble"><a href="#Preamble" class="headerlink" title="Preamble"></a>Preamble</h1><p>TDSM is one of several open-source server mods available for the online action-adventure game Terraria. This modification is developed to allow the Terraria server software to be run on Linux like operating systems, and opens up many other potential benefits for players using the server. </p>
<ul>
<li>External plugin support. </li>
<li>Administrative permissions system. </li>
<li>MySQL &amp; SQLite databases.</li>
<li>New &amp; custom in-game commands.</li>
<li>Remote console administration. </li>
</ul>
<p>It’s also updated relatively quickly by the maintainers after a new Terraria client version is released.</p>
<blockquote>
<p><a href="https://github.com/DeathCradle/Terraria-s-Dedicated-Server-Mod" target="_blank" rel="external">TDSM Github Project Page</a></p>
</blockquote>
<a id="more"></a>
<hr>
<h1 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h1><ul>
<li><p>A Terraria game client for connection to the server after installation. </p>
</li>
<li><p>For a <strong>small</strong> sized world, a VPS that has at least 1GB RAM. </p>
</li>
<li><p>For a <strong>medium</strong> sized world, a VPS that has at least 1GB RAM. </p>
</li>
<li><p>For a <strong>large</strong> sized world, a VPS that has at least 2GB RAM. </p>
</li>
</ul>
<hr>
<h1 id="1-–-Update-System-Packages"><a href="#1-–-Update-System-Packages" class="headerlink" title="1 – Update System Packages"></a>1 – Update System Packages</h1><p>Ensure the packages are up to date on the system with the command: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update &amp;&amp; sudo apt-get upgrade</span><br></pre></td></tr></table></figure>
<p>Confirm the action by entering <code>y</code> for any prompts in this step. </p>
<hr>
<h1 id="2-–-Install-Screen"><a href="#2-–-Install-Screen" class="headerlink" title="2 – Install Screen"></a>2 – Install Screen</h1><p>Screen will be used to keep the TDSM server running in a persistent shell session, and allows us to disconnect or re-attach to the session when needed. </p>
<p>Install Screen with the command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install screen</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="3-–-Install-Mono"><a href="#3-–-Install-Mono" class="headerlink" title="3 – Install Mono"></a>3 – Install Mono</h1><p>Mono is the open source implementation of Microsoft’s .NET Framework, and we need it to successfully run and start the TDSM server later on.</p>
<p>Install Mono and all its packages with the command: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install mono-complete</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="4-–-Install-Unzip"><a href="#4-–-Install-Unzip" class="headerlink" title="4 – Install Unzip"></a>4 – Install Unzip</h1><p>The server software comes packaged in a <code>.zip</code> file. So install the <em>unzip</em> package which we’ll use in the next step, to extract the files. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install unzip</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="5-–-Add-Swap-Space"><a href="#5-–-Add-Swap-Space" class="headerlink" title="5 – Add Swap Space"></a>5 – Add Swap Space</h1><p>The server mod requires adequate swap space to be allocated by the system. Otherwise this can result in crashing and instability with TDSM whilst it is running. </p>
<p>Create the base swap file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo fallocate <span class="_">-l</span> &lt;^&gt;4G&lt;^&gt; /swapfile</span><br></pre></td></tr></table></figure>
<p>Give it the correct permissions it needs:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo chmod 600 /swapfile</span><br></pre></td></tr></table></figure>
<p>Have the system build the file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mkswap /swapfile</span><br></pre></td></tr></table></figure>
<p>Then enable it with the <code>swapon</code> command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo swapon /swapfile</span><br></pre></td></tr></table></figure>
<p>To automate the mounting of the swap file on boot we need to include its details into the <code>/etc/fstab</code> file.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo nano /etc/fstab</span><br></pre></td></tr></table></figure>
<p>Insert this top line show in the next code snippet into the file.</p>
<figure class="highlight bash"><figcaption><span>/etc/fstab</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/swapfile   none    swap    sw    0   0</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="6-–-Download-the-TDSM-Server-Software"><a href="#6-–-Download-the-TDSM-Server-Software" class="headerlink" title="6 – Download the TDSM Server Software"></a>6 – Download the TDSM Server Software</h1><p>The TDSM server software that we’ll download in this step will be stored and run from your user’s home directory.</p>
<p>Make sure this is your current working directory by entering:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~</span><br></pre></td></tr></table></figure>
<p>As of writing this tutorial the current TDSM server build release is number: <code>005</code></p>
<p>For newer versions than the current <code>005</code> release, and to download the most up to date version.<br>You’ll need to change the URL passed to <code>wget</code> in the next code snippet. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://github.com/DeathCradle/Terraria<span class="_">-s</span>-Dedicated-Server-Mod/releases/download/Build-5/tdsm-b5.zip</span><br></pre></td></tr></table></figure>
<p>The TDSM server releases and their file URL’s can be found on the project’s GitHub page:</p>
<blockquote>
<p><a href="https://github.com/DeathCradle/Terraria-s-Dedicated-Server-Mod/releases" target="_blank" rel="external">TDSM Releases on Github</a></p>
</blockquote>
<hr>
<h1 id="7-–-Run-the-Terraria-Server-Binary"><a href="#7-–-Run-the-Terraria-Server-Binary" class="headerlink" title="7 – Run the Terraria Server Binary"></a>7 – Run the Terraria Server Binary</h1><p>Next unzip the downloaded archive file and extract the contents into a new folder named <code>tdsm-terraria-server</code> using the <code>-d</code> option:</p>
<blockquote>
<p><strong>Note:</strong> The downloaded <code>.zip</code> file name will differ for future release downloads.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ unzip tdsm-b5.zip <span class="_">-d</span> tdsm-terraria-server</span><br></pre></td></tr></table></figure>
<p>Change into the unpacked <code>tdsm-terraria-server</code> directory with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> tdsm-terraria-server</span><br></pre></td></tr></table></figure>
<p>Now to run the server software in it’s most basic form without any arguments or parameters, enter the following command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ screen mono tdsm.exe</span><br></pre></td></tr></table></figure>
<p>Note the inclusion of Screen in the last command. This runs the Mono program and server in a separate shell session to our original one.</p>
<hr>
<h1 id="8-–-Create-a-New-World"><a href="#8-–-Create-a-New-World" class="headerlink" title="8 – Create a New World"></a>8 – Create a New World</h1><p>The below output (or similar) is seen upon successfully running the server binary in “<strong>Step 7 – Run the Terraria Server Binary</strong>“.</p>
<p>Type <code>n</code>  and press <code>ENTER</code> to create a new world.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">10/2/2015 2:05:20 PM Run&gt; TDSM Rebind API build 5lr running on Mono                                                                                                                                                                            ﻿10/2/2015 2:05:20 PM Run&gt; Logging started to file <span class="string">"/home/&lt;username&gt;/src/tdsm-terraria-server/Data/server_20151002_1405.log"</span>.</span><br><span class="line">10/2/2015 2:05:20 PM Run&gt; Loading plugin from TDSM.Core.dll.</span><br><span class="line">10/2/2015 2:05:20 PM Run&gt; TDSM Rebind core build 5lr</span><br><span class="line">10/2/2015 2:05:20 PM Run&gt; TDSM Rebind core enabled</span><br><span class="line">10/2/2015 2:05:21 PM Run&gt; Server state changed to: Initialising</span><br><span class="line">10/2/2015 2:05:23 PM Run&gt; Server state changed to: Starting</span><br><span class="line">Terraria Server v1.3.0.8</span><br><span class="line"></span><br><span class="line">n               New World</span><br><span class="line">d   &lt;number&gt;    Delete World</span><br><span class="line"></span><br><span class="line">Choose World:</span><br></pre></td></tr></table></figure>
<p>Enter <code>1</code> , <code>2</code> , or <code>3</code> depending upon your preference and suitability of world size. </p>
<p>The requirements section at the start of this article indicates what world size is suitable for your VPS. </p>
<p>Here it is again:</p>
<ul>
<li><p>For a <strong>small</strong> sized world, a VPS that has at least 1GB RAM.   </p>
</li>
<li><p>For a <strong>medium</strong> sized world, a VPS that has at least 1GB RAM.   </p>
</li>
<li><p>For a <strong>large</strong> sized world, a VPS that has at least 2GB RAM.   </p>
</li>
</ul>
<blockquote>
<p><strong>Warning:</strong> Be aware that the larger the world the more memory and CPU your server will need to consume whilst the server is up and running, so be sure to select a suitable world size. </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Terraria Server v1.3.0.8</span><br><span class="line"></span><br><span class="line">1       Small</span><br><span class="line">2       Medium</span><br><span class="line">3       Large</span><br><span class="line"></span><br><span class="line">Choose size:</span><br></pre></td></tr></table></figure>
<p>Enter <code>1</code> , <code>2</code> , or <code>3</code> again once more depending upon your desired level of in-game difficulty.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Terraria Server v1.3.0.8</span><br><span class="line"></span><br><span class="line">1       Normal</span><br><span class="line">2       Expert</span><br><span class="line"></span><br><span class="line">Choose difficulty:</span><br></pre></td></tr></table></figure>
<p>Now give the new world a suitable name. </p>
<p>For example purposes we’re calling ours <code>test-tdsm-server</code> in this guide. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Terraria Server v1.3.0.8</span><br><span class="line"></span><br><span class="line">Enter world name:</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Wait for the new world to be generated as it outputs its progress and percentage completion.</strong></p>
</blockquote>
<hr>
<h1 id="9-–-Set-World-Details"><a href="#9-–-Set-World-Details" class="headerlink" title="9 – Set World Details"></a>9 – Set World Details</h1><p>Once the world is created and has finished generating, choose your previously created world by entering <code>1</code> into the prompt:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1   <span class="built_in">test</span>-tdsm-server      norm, crim, exp   Last used: 10/02/2015 10:27 AM</span><br><span class="line"></span><br><span class="line">n               New World</span><br><span class="line">d   &lt;number&gt;    Delete World</span><br><span class="line"></span><br><span class="line">Choose World:</span><br></pre></td></tr></table></figure>
<p>Provide the world with a <strong>max</strong> number of players that can join the server at any one time. If you are unsure on a value, the default of <code>8</code> is a sensible choice. </p>
<blockquote>
<p><strong>Warning:</strong> Once again be aware that the more players the world has connected the more memory and CPU your server will need to consume whilst running. </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Terraria Server v1.3.0.8</span><br><span class="line"></span><br><span class="line">Max players (press enter <span class="keyword">for</span> 8):</span><br></pre></td></tr></table></figure>
<p>Enter a suitable port the server can transmit on, go for the default choice of <code>7777</code> if you don’t have a specific port you want to use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Terraria Server v1.3.0.8</span><br><span class="line"></span><br><span class="line">Server port (press enter <span class="keyword">for</span> 7777):</span><br></pre></td></tr></table></figure>
<p>The final two questions are up to you (forwarding and password). Forwarding with <code>iptables</code> is covered in this next section however. </p>
<blockquote>
<p><strong>Wait for the server to load as it outputs its progress.</strong></p>
</blockquote>
<hr>
<h1 id="10-–-iptables-Firewall"><a href="#10-–-iptables-Firewall" class="headerlink" title="10 – iptables Firewall"></a>10 – iptables Firewall</h1><p>Now the server is up running you’ll need to de-attach from the currently active screen session with:</p>
<p><code>CTRL</code> + <code>a</code> then <code>c</code></p>
<p>If using <code>iptables</code> (or you intend to use it) as a firewall solution on the VPS, then open up the port number you chose in <strong>“ 9 – Set World Details”</strong></p>
<p>To do this use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -A INPUT -p tcp --dport 7777 -j ACCEPT -m comment --comment <span class="string">"allow connections on port 7777 Terraria server"</span></span><br></pre></td></tr></table></figure>
<p>Replacing <code>7777</code> for your own chosen port number.</p>
<p>For any other firewall program you may use in its place perform the equivalent port forwarding/opening actions. </p>
<p>To now connect back to the previous screen session press: </p>
<p><code>CTRL</code> + <code>a</code> then <code>n</code></p>
<hr>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>The server itself is now ready and should be open for connections via the Terraria client.</p>
<p>To learn how to administer, run, and configure the server properly alongside what configuration files it uses, see the Github wiki:</p>
<blockquote>
<p><a href="https://github.com/DeathCradle/Terraria-s-Dedicated-Server-Mod/wiki/Installation-and-Running-The-Server" target="_blank" rel="external">TDSM Project Github Wiki</a></p>
</blockquote>
<hr>
<p><strong>More Information</strong></p>
<ul>
<li><a href="http://store.steampowered.com/app/105600/" target="_blank" rel="external">Terraria Client on Steam</a> – The client is very small in size and available through Steam. </li>
<li><a href="http://terraria.gamepedia.com/Mods" target="_blank" rel="external">Terraria Mod Information</a> – Brief explanation of mods for Terraria. </li>
<li><a href="https://github.com/NyxStudios/TShock" target="_blank" rel="external">TShock Terraria Server Mod</a> – Another mod that may function on Linux/Unix OS, but not one hundred percent supported.</li>
</ul>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Debian/" class="post__tag__link">Debian</a></li><li class="post__tag__item"><a href="/tags/Screen/" class="post__tag__link">Screen</a></li><li class="post__tag__item"><a href="/tags/TDSM/" class="post__tag__link">TDSM</a></li></ul><a href="/2015/10/02/terraria-tdsm-server/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2018 Scarlz</div><menu class="page-menu u-fr"><li class="page-menu__item"><span title="Previous" class="page-menu__link icon-arrow-left page-menu__link--disabled"></span></li><li class="page-menu__item"><span title="Next" class="page-menu__link icon-arrow-right page-menu__link--disabled"></span></li></menu></footer><script>(function(h,g,l,k,j,i){j=h.createElement(g),i=h.getElementsByTagName(g)[0],
j.src="//"+l+".disqus.com/"+k+".js",i.parentNode.insertBefore(j,i)})
(document,"script","totts","count");
</script></body></html>