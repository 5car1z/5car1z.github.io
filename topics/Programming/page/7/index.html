<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="Linux System Administration"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="C.J. Scarlett" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>Programming - C.J. Scarlett</title><link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">C.J. Scarlett</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/topics" class="head-nav__link">Topics</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li><li class="head-nav__item"><a href="/misc" class="head-nav__link">Misc</a></li><li class="head-nav__item"><a href="/about" class="head-nav__link">About</a></li><li class="head-nav__item"><a href="/contact" class="head-nav__link">Contact</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2015-07-03T23:00:00.000Z" class="post__time">July 4, 2015</time><h1 class="post__title"><a href="/2015/07/04/notes-pass-unix-password-manager/">Pass Unix Password Manager</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/wMHZ8Jm.png" alt="GPG Lock"></p>
<h1 id="Preamble"><a href="#Preamble" class="headerlink" title="Preamble"></a>Preamble</h1><p>Pass is a command line password manager that follows the Unix philosopy of being small, simple, efficient, and compatible. It works by storing machine generated or user generated passwords in an encrypted GPG file. Each of which are organised into a named folder hierarchy. It can be manipulated through other command line tools if needed, and its contents easily transferred from system to system.</p>
<p>As indicated Pass operates with traditional command line options and arguments, and has commands for adding, editing, generating, and retrieving specific passwords. It also has built in features such as the ability to temporarily load passwords onto your system clipboard, and track password changes using version control such as Git.</p>
<p>All passwords expand from a root folder created with the path; <code>~/.password-store</code> and the hierarchy of descending passwords expands from there. You can if preferred interact with the password store using other ordinary Linux/Unix shell commands instead. Furthermore there’s provided Bash completion so that you can hit <code>TAB</code> to fill in paths and file names (Zsh completion is also available).</p>
<a id="more"></a>
<hr>
<h1 id="Step-1-–-Create-A-GPG-Key"><a href="#Step-1-–-Create-A-GPG-Key" class="headerlink" title="Step 1 – Create A GPG Key"></a>Step 1 – Create A GPG Key</h1><p>To begin using Pass you first need a GPG key.</p>
<p>You can create one by issuing the following command in a Linux Bash terminal on most distributions:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --gen-key</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note:</strong> On Arch Linux Install GPG first with: <code>sudo pacman -S gpg</code></p>
</blockquote>
<p>The initial prompt will appear and looks like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Please select what kind of key you want:</span><br><span class="line">   (1) RSA and RSA (default)</span><br><span class="line">   (2) DSA and Elgamal</span><br><span class="line">   (3) DSA (sign only)</span><br><span class="line">   (4) RSA (sign only)</span><br><span class="line">Your selection?</span><br></pre></td></tr></table></figure>
<p>Choose <code>1</code>  which will enable both encryption and signing.</p>
<p>The next prompt asks for the keysize:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RSA keys may be between 1024 and 4096 bits long.</span><br><span class="line">What keysize <span class="keyword">do</span> you want? (2048)</span><br></pre></td></tr></table></figure>
<p>Enter <code>2048</code> for the keysize. </p>
<p>Then read the next set of output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Please specify how long the key should be valid.</span><br><span class="line">         0 = key does not expire</span><br><span class="line">      &lt;n&gt;  = key expires <span class="keyword">in</span> n days</span><br><span class="line">      &lt;n&gt;w = key expires <span class="keyword">in</span> n weeks</span><br><span class="line">      &lt;n&gt;m = key expires <span class="keyword">in</span> n months</span><br><span class="line">      &lt;n&gt;y = key expires <span class="keyword">in</span> n years</span><br><span class="line">Key is valid <span class="keyword">for</span>? (0)</span><br></pre></td></tr></table></figure>
<p>Most people make their keys valid until infinity, which is the default option. If you do this don’t forget to revoke the key when you no longer use it.</p>
<p>Enter <code>0</code> for infinity, or however long you wish.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">You need a user ID to identify your key; the software constructs the user ID</span><br><span class="line">from the Real Name, Comment and E-mail Address <span class="keyword">in</span> this form:</span><br><span class="line">    <span class="string">"Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;"</span></span><br></pre></td></tr></table></figure>
<p>Your next input from here should be your real name:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Real name:</span><br></pre></td></tr></table></figure>
<p>Followed by your email address you wish to associate the key with (you can add more later!) : </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E-mail address:</span><br></pre></td></tr></table></figure>
<p>Here you can give the key a description that fits its purpose:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Comment:</span><br></pre></td></tr></table></figure>
<p>This part is important and is the passphrase that you’ll use to open/decrypt your key that is generated. You can make it memorable but it’s essential that this follows a few precepts to make it strong and considered “secure”.</p>
<blockquote>
<p><strong>For Example:</strong> Contains symbols, contains upper &amp; lower case characters, some numbers, no dictionary words, etc.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">You need a Passphrase to protect your secret key.</span><br><span class="line"></span><br><span class="line">Enter passphrase:</span><br></pre></td></tr></table></figure>
<p>As the next prompt says type on the keyboard, move the mouse, and perform some actions that read/write to the machine’s hard drives. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">We need to generate a lot of random bytes. It is a good idea to perform</span><br><span class="line">some other action (<span class="built_in">type</span> on the keyboard, move the mouse, use the</span><br><span class="line">disks) during the prime generation; this gives the random number</span><br><span class="line">generator a better chance to gain enough entropy.</span><br></pre></td></tr></table></figure>
<p>If this is not enough or does not seem to update and complete after sometime, open up a new shell session and install the <a href="https://wiki.archlinux.org/index.php/Haveged" target="_blank" rel="external"><em>haveged</em></a> package:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install haveged</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note:</strong> There are several other ways of generating more entrophy (some more appropriate than others) and the best method will differ from setup to setup.</p>
</blockquote>
<p>The process should now continue and include your new key’s location, value, and details. </p>
<p>With the main line reading:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public and secret key created and signed.</span><br></pre></td></tr></table></figure>
<p>One more step you can complete <strong>locally</strong> is to set your key as the default key by entering this line in your <code>~/.bashrc</code> file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> GPGKEY=&lt;key value&gt;</span><br></pre></td></tr></table></figure>
<p>Now restart the <code>gpg-agent</code> with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ killall -q gpg-agent</span><br><span class="line">$ <span class="built_in">eval</span> $(gpg-agent --daemon)</span><br></pre></td></tr></table></figure>
<p>Then source your <code>.bashrc</code> again via:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-2-–-Creating-A-Revocation-Certificate"><a href="#Step-2-–-Creating-A-Revocation-Certificate" class="headerlink" title="Step 2 – Creating A Revocation Certificate"></a>Step 2 – Creating A Revocation Certificate</h1><p>A revocation certificate must be generated to revoke your public key if your private key becomes compromised in any way.</p>
<p>It is recommended to create a revocation certificate when you create your key. </p>
<blockquote>
<p><strong>Note:</strong> Keep your revocation certificate on a medium that you can safely secure, like a thumb drive in a locked box. The revocation key may be printed and/or stored as a file. Take care to safeguard your revocation key.</p>
</blockquote>
<p>To create a revocation certificate for your key carry out these two commands. </p>
<p>This first statement will create an environment variable in Bash containing the GPG key value you just created. Note that if you have other keys previously generated the value extracted with this command may be of a different key, this filters on the first key listed by the <code>gpg</code> program:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> GPGKEY=<span class="string">"<span class="variable">$(gpg -K | awk 'NR==3 &#123;print $2&#125;' | sed 's/2048R\///g')</span>"</span></span><br></pre></td></tr></table></figure>
<p>Now we create the revocation certificate by passing the <code>$GPGKEY</code> variable we defined:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --output revoke.asc --gen-revoke <span class="variable">$GPGKEY</span></span><br></pre></td></tr></table></figure>
<p>Enter <code>0</code> for this multiple choice list.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Create a revocation certificate <span class="keyword">for</span> this key? (y/N) y</span><br><span class="line">Please select the reason <span class="keyword">for</span> the revocation:</span><br><span class="line">  0 = No reason specified</span><br><span class="line">  1 = Key has been compromised</span><br><span class="line">  2 = Key is superseded</span><br><span class="line">  3 = Key is no longer used</span><br><span class="line">  Q = Cancel</span><br><span class="line">(Probably you want to select 1 here)</span><br></pre></td></tr></table></figure>
<p>Enter something along the lines of - “Will be used if/when this key is ever compromised.”</p>
<p>This also needs ending with a new line.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Enter an optional description; end it with an empty line:</span><br><span class="line">&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
<p>Now enter your key’s passphrase </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">You need a passphrase to unlock the secret key <span class="keyword">for</span></span><br><span class="line">user:</span><br></pre></td></tr></table></figure>
<p>The resultant message seen here means you successfully created your revocation certificate. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ASCII armoured output forced.</span><br><span class="line">Revocation certificate created.</span><br><span class="line"></span><br><span class="line">Please move it to a medium <span class="built_in">which</span> you can hide away; <span class="keyword">if</span> Mallory gets</span><br><span class="line">access to this certificate he can use it to make your key unusable.</span><br><span class="line">It is smart to <span class="built_in">print</span> this certificate and store it away, just <span class="keyword">in</span> <span class="keyword">case</span></span><br><span class="line">your media become unreadable.  But have some caution:  The <span class="built_in">print</span> system of</span><br><span class="line">your machine might store the data and make it available to others!</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note:</strong> Mallory being a malicious attacker (less commonly called Trudy, an intruder.); unlike the passive Eve, this one is the active man-in-the-middle attacker who can modify messages, substitute his/her own messages, replay old messages, and so on. – <a href="https://en.wikipedia.org/wiki/Alice_and_Bob#Cast_of_characters" target="_blank" rel="external">Source</a></p>
</blockquote>
<p>As indicated backup somewhere safe the <code>revoke.asc</code> file, in case you should ever need it in the future to invalidate your private key.  </p>
<p>It can be found in your current working directory where you executed the initial <code>gpg --output</code> command. </p>
<hr>
<h1 id="Step-3-–-Installing-Pass"><a href="#Step-3-–-Installing-Pass" class="headerlink" title="Step 3 – Installing Pass"></a>Step 3 – Installing Pass</h1><h2 id="Arch-Linux"><a href="#Arch-Linux" class="headerlink" title="Arch Linux"></a>Arch Linux</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S pass</span><br></pre></td></tr></table></figure>
<h2 id="Debian-Ubuntu"><a href="#Debian-Ubuntu" class="headerlink" title="Debian / Ubuntu"></a>Debian / Ubuntu</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install pass</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-4-–-Initialising-Pass"><a href="#Step-4-–-Initialising-Pass" class="headerlink" title="Step 4 – Initialising Pass"></a>Step 4 – Initialising Pass</h1><p>After installing Pass you need to initialise it with your GPG key from the previous steps.</p>
<p>In the same shell session as earlier use the environment variable <code>$GPGKEY</code> and supply it to Pass via the <code>init</code> parameter: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass init <span class="variable">$GPGKEY</span></span><br></pre></td></tr></table></figure>
<p>This message will follow:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir: created directory ‘/home/scarlz/.password-store’</span><br><span class="line">Password store initialized <span class="keyword">for</span> &lt;KEYVALUE&gt;.</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-5-–-Adding-Password-Entries"><a href="#Step-5-–-Adding-Password-Entries" class="headerlink" title="Step 5 – Adding Password Entries"></a>Step 5 – Adding Password Entries</h1><p>To add a new password entry to Pass, follow this next code snippet’s syntax:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass insert email/proton-mail/count.elmsley@protonmail.com</span><br></pre></td></tr></table></figure>
<p>This example was for an entry of an email address account in a descriptive hierarchy.</p>
<p>The prompt generated asks for the password that is to be associated and stored with this entry</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir: created directory ‘/home/scarlz/.password-store/email’</span><br><span class="line">mkdir: created directory ‘/home/scarlz/.password-store/email/gmail’</span><br><span class="line">Enter password <span class="keyword">for</span> email/proton-mail/count.elmsley@protonmail.com:</span><br><span class="line">Retype password <span class="keyword">for</span> email/proton-mail/count.elmsley@protonmail.com:</span><br></pre></td></tr></table></figure>
<p>The password is then read encrypted, and placed in <code>~/.password-store</code> .</p>
<p>As the data stored in the encrypted files are plain text you can add any other details that go with an entry using the <code>-m</code> parameter. This creates the password with a multi-line entry where the first field is usually the password and the rest of the lines are the extra details such as usernames, emails addresses, etc. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass insert -m email/proton-mail/count.elmsley@protonmail.com</span><br></pre></td></tr></table></figure>
<p>Press <code>CTRL</code> + <code>D</code> to quit and confirm the entry when in multi-line mode. </p>
<p>To use Pass to generate a password for an entry on your behalf, use the <code>generate</code> option:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass generate archlinux.org/wiki/username &lt;n&gt;</span><br></pre></td></tr></table></figure>
<p>The <code>&lt;n&gt;</code> represents the number of characters you want the password to be in total. Replace it with a value like <code>16</code> to make the password lengthy enough. </p>
<p>There are some other options you can toggle like <code>-n</code> to exclude symbols from the password, and <code>-c</code> to send the password straight to the clipboard, and not print it to standard out once it’s created. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass generate -n -c archlinux.org/wiki/username 16</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-6-–-Displaying-amp-Accessing-Passwords"><a href="#Step-6-–-Displaying-amp-Accessing-Passwords" class="headerlink" title="Step 6 – Displaying &amp; Accessing Passwords"></a>Step 6 – Displaying &amp; Accessing Passwords</h1><p>The most basic and easiest way of displaying your password hierarchy tree is by running the program without any extra options:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Password Store</span><br><span class="line">├── Business</span><br><span class="line">│   ├── some-silly-business-site.com</span><br><span class="line">│   └── another-business-site.net</span><br><span class="line">├── Email</span><br><span class="line">│   ├── user@gmail.com</span><br><span class="line">│   └── zx2c4.com</span><br><span class="line">└── France</span><br><span class="line">    ├── banking</span><br><span class="line">    ├── freebox</span><br><span class="line">    └── mobilephone</span><br></pre></td></tr></table></figure>
<p>If you want to single out certain categories or sections of the tree use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass ls Email/</span><br></pre></td></tr></table></figure>
<p>Which shows only:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">├── Email</span><br><span class="line">│   ├── user@gmail.com</span><br><span class="line">│   └── zx2c4.com</span><br></pre></td></tr></table></figure>
<p>To actually decrypt and retrieve a password, call the program and provide the path to the password:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass Email/user@gmail.com</span><br></pre></td></tr></table></figure>
<p>You will now have to enter or unlock your GPG key to see and display the password.</p>
<p>Instead of displaying the password in the terminal you can copy it to the clipboard for 45 seconds via <code>-c</code> :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass -c Email/user@gmail.com</span><br></pre></td></tr></table></figure>
<p>Which gives the message below and let’s you paste the password into any websites, forms, etc:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Copied Email/user@gmail.com to clipboard. Will clear <span class="keyword">in</span> 45 seconds.</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-7-–-Removing-amp-Editing-Password-Entries"><a href="#Step-7-–-Removing-amp-Editing-Password-Entries" class="headerlink" title="Step 7 – Removing &amp; Editing Password Entries"></a>Step 7 – Removing &amp; Editing Password Entries</h1><p>You many need to remove passwords in the manager from time to time. This is done with the familiarly named <code>rm</code> and the path to the password file you want to remove. </p>
<p>Here an example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass rm email/proton-mail/count.elmsley@protonmail.com</span><br></pre></td></tr></table></figure>
<p>To remove the folders in the process of the deletion include <code>-r</code> (recursively) in the command: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass rm -r email/proton-mail/count.elmsley@protonmail.com</span><br></pre></td></tr></table></figure>
<p>Normally there is a prompt to make sure you are certain you want to delete the password, this can be removed by using <code>-f</code> which is short for ‘force” :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass rm <span class="_">-f</span> email/proton-mail/count.elmsley@protonmail.com</span><br></pre></td></tr></table></figure>
<p>To change an existing password and edit it replace <code>rm</code> with <code>edit</code> like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass edit email/proton-mail/count.elmsley@protonmail.com</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-8-–-Git-Version-Control"><a href="#Step-8-–-Git-Version-Control" class="headerlink" title="Step 8 – Git Version Control"></a>Step 8 – Git Version Control</h1><p>Pass has support for Git tracking which would be ideal for private Git repositories but also in theory “safe” to put on a public service like Github, as the files are of course encrypted with GPG. Depending upon the strength of your passphrase too.</p>
<p>Make sure you have <code>git</code> installed on your system for this next section:</p>
<h2 id="Arch-Linux-1"><a href="#Arch-Linux-1" class="headerlink" title="Arch Linux"></a>Arch Linux</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S git</span><br></pre></td></tr></table></figure>
<h2 id="Debian-Ubuntu-1"><a href="#Debian-Ubuntu-1" class="headerlink" title="Debian / Ubuntu"></a>Debian / Ubuntu</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install git</span><br></pre></td></tr></table></figure>
<p>Here’s how the Git functionality works with pass:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /<span class="variable">$USER</span>/.password-store</span><br></pre></td></tr></table></figure>
<p>Initialise the repository through pass:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass git init</span><br></pre></td></tr></table></figure>
<p>Add your remote repo address and name:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass git remote add origin git-repo-address.com:repo-name</span><br></pre></td></tr></table></figure>
<p>Set Git to push with these options:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass git push -u --all</span><br></pre></td></tr></table></figure>
<p>You can now add, edit, remove, and make changes then push them to your remote repository with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pass git push</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Step-9-–-Shell-Environment-Variables"><a href="#Step-9-–-Shell-Environment-Variables" class="headerlink" title="Step 9 – Shell Environment Variables"></a>Step 9 – Shell Environment Variables</h1><p>Here are three variables I found that seem potentially the most useful, should you ever need to fiddle with their functionality (there are others though).</p>
<p><code>PASSWORD_STORE_DIR</code><br>Overrides the default password storage directory.</p>
<p><code>$PASSWORD_STORE_GIT</code><br>Overrides the default root of the git repository, which is helpful if PASSWORD_STORE_DIR is temporarily set to a sub-directory of the default password store.</p>
<p><code>$PASSWORD_STORE_CLIP_TIME</code><br>Specifies the number of seconds to wait before restoring the clipboard, by default 45 seconds.</p>
<hr>
<h1 id="Step-10-–-Exporting-amp-Importing-Keys"><a href="#Step-10-–-Exporting-amp-Importing-Keys" class="headerlink" title="Step 10 – Exporting &amp; Importing Keys"></a>Step 10 – Exporting &amp; Importing Keys</h1><p>To transfer and move around a pass GPG key to other systems, follow these steps for a rudimentary solution.</p>
<h2 id="Public-Key"><a href="#Public-Key" class="headerlink" title="Public Key"></a>Public Key</h2><p>To see the current public GPG keys you have setup and active use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --list-keys</span><br></pre></td></tr></table></figure>
<p>One of these will show the ID and details of your Pass key, use the key ID value to export the public key into a file with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg -ao pass_public.key --export &lt;key ID value&gt;</span><br></pre></td></tr></table></figure>
<p>Then transfer the generated <code>pass_public.key</code> onto your new system, and use the <code>--import</code> option to add it to GPG.</p>
<p>This is done with the command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --import pass_public.key</span><br></pre></td></tr></table></figure>
<h2 id="Private-Key"><a href="#Private-Key" class="headerlink" title="Private Key"></a>Private Key</h2><p>To see the current private GPG keys you have setup and active use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --list-secret-keys</span><br></pre></td></tr></table></figure>
<p>Like in the public key section, export the private key into a file with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg -ao pass_private.key --export-secret-keys</span><br></pre></td></tr></table></figure>
<p>Then transfer the generated <code>pass_private.key</code> onto your new system, and use the <code>--import</code> option to add it to GPG.</p>
<p>This is done with the command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --import pass_private.key</span><br></pre></td></tr></table></figure>
<h2 id="Trust-Error"><a href="#Trust-Error" class="headerlink" title="Trust Error"></a>Trust Error</h2><p>Sometimes after importing the key onto a new system you may get an error message similiar to:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg: There is no assurance this key belongs to the named user</span><br></pre></td></tr></table></figure>
<p>Which appers when trying to encrypt a new file or edit an existing Pass entry.</p>
<p>If so use GPG to edit the key.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gpg --edit-key &lt;Key Value&gt;</span><br></pre></td></tr></table></figure>
<p>At the prompt type:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; trust</span><br></pre></td></tr></table></figure>
<p>Then from the numerical choices displayed enter a suitable value. The highest option <code>5</code> is fine if you know that this key is definetly your own and not a potentially unsafe key.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Please decide how far you trust this user to correctly verify other users<span class="string">' keys</span><br><span class="line">(by looking at passports, checking fingerprints from different sources, etc.)</span><br><span class="line"></span><br><span class="line">1 = I don'</span>t know or won<span class="string">'t say</span><br><span class="line">2 = I do NOT trust</span><br><span class="line">3 = I trust marginally</span><br><span class="line">4 = I trust fully</span><br><span class="line">5 = I trust ultimately</span><br><span class="line">m = back to the main menu</span><br><span class="line"></span><br><span class="line">Your decision?</span></span><br></pre></td></tr></table></figure>
<p>The operation you were trying to perform with Pass should now work as they key is trusted. Enter <code>quit</code> to leave the gpg prompt.</p>
<hr>
<p>On a final note the community around Pass has produced a cross-platform GUI client, an Android app, an iOS app, a Firefox plugin, a Windows client, a dmenu script, OS X integration, and even an emacs package.</p>
<p>So look into these if they sound interesting: </p>
<blockquote>
<p><a href="https://github.com/zx2c4/password-store" target="_blank" rel="external">Pass on Github</a></p>
</blockquote>
<hr>
<p><strong>More Information</strong></p>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/GnuPG" target="_blank" rel="external">ArchWiki - GPG Page</a> - ArchWiki details for Pass.</li>
<li><a href="https://help.ubuntu.com/community/GnuPrivacyGuardHowto" target="_blank" rel="external">GNU Privacy Guard How To</a> – An Ubuntu community guide on setting up GPG keys. </li>
<li><a href="http://www.passwordstore.org/" target="_blank" rel="external">Official Password Store Page</a> – The official site dedicated to Pass.</li>
<li><a href="https://www.gnupg.org/gph/en/manual.html#AEN26" target="_blank" rel="external">GPG Official Manual</a> - The manual provided from the offical GNU website. </li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-use-gpg-to-encrypt-and-sign-messages-on-an-ubuntu-12-04-vps" target="_blank" rel="external">How To Use GPG to Encrypt and Sign Messages on an Ubuntu 12.04 VPS</a> - A Digital Ocean tutorial on using GPG to send encrypted messages. </li>
<li><a href="http://serverfault.com/questions/214605/gpg-not-enough-entropy" target="_blank" rel="external">Not Enough Entropy Error</a> - A thread around generating entropy.  </li>
<li><a href="http://blog.sanctum.geek.nz/linux-crypto-passwords/" target="_blank" rel="external">Blog - Linux Crypto Passwords</a> - Another similar blog post on Pass. </li>
</ul>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Git/" class="post__tag__link">Git</a></li><li class="post__tag__item"><a href="/tags/Pass/" class="post__tag__link">Pass</a></li><li class="post__tag__item"><a href="/tags/GPG/" class="post__tag__link">GPG</a></li></ul><a href="/2015/07/04/notes-pass-unix-password-manager/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-06-13T23:00:00.000Z" class="post__time">June 14, 2015</time><h1 class="post__title"><a href="/2015/06/14/notes-bash-env-variables/">BASH Environment and Shell Variables</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/qthCSsn.png" alt="Shell Logo"></p>
<h1 id="Preamble"><a href="#Preamble" class="headerlink" title="Preamble"></a>Preamble</h1><p>Variables provide a simple way to share configuration settings between multiple applications and processes in Linux, and are mainly set in either a terminal or shell configuration file upon start up. </p>
<p>They are either environmental or shell variables by convention. Both of which are usually defined using all capital letters. This helps users distinguish environmental variables from within other contexts.</p>
<a id="more"></a>
<hr>
<h1 id="1-–-Terminology"><a href="#1-–-Terminology" class="headerlink" title="1 – Terminology"></a>1 – Terminology</h1><p>As said there are technically one of two categories a variable can fall into:</p>
<p><strong>“Environment variables”</strong> have been defined for use in the current shell and will be inherited by any child shells or processes spawned as a result of the parent. Environmental variables can also be used to pass information into processes that are spawned by the shell.</p>
<p><strong>“Shell variables”</strong> are contained exclusively within the shell in which they were set or defined. They are mostly used to keep track of ephemeral temporal data, like the current working directory in a session. </p>
<h1 id="2-–-Displaying-Variables"><a href="#2-–-Displaying-Variables" class="headerlink" title="2 – Displaying Variables"></a>2 – Displaying Variables</h1><p>To see all currently set <strong>environment variables</strong> in a terminal type:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ printenv</span><br></pre></td></tr></table></figure>
<p>Alternatively the shorter command <code>env</code> works too:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ env</span><br></pre></td></tr></table></figure>
<p>To see individual or specific environment variables and print with standard output use either of the following:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ printenv TERM</span><br></pre></td></tr></table></figure>
<p>Prints multiple variables.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ printenv SHELL USER</span><br></pre></td></tr></table></figure>
<p><code>echo</code> prints contents.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$TERM</span></span><br></pre></td></tr></table></figure>
<p>Which can print multiple variables too.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$LANG</span> <span class="variable">$HOME</span></span><br></pre></td></tr></table></figure>
<p>To output <strong>shell variables</strong> as well as environment variables using <code>set</code> do the following: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">set</span> | less -N</span><br></pre></td></tr></table></figure>
<p><code>set</code> is usually used to change or unset shell options and parameters but here we have <em>piped</em> the command through less to see what it outputs instead of allowing it to make changes. </p>
<p>The command can be modified to not show the residual bash functions included in the last output (using posix mode). The brackets also indicate that the process will be run in a <em>sub shell</em> so that <code>set</code> does not actually change anything in the current shell’s environment. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ (<span class="built_in">set</span> -o posix; <span class="built_in">set</span>) | less -N</span><br></pre></td></tr></table></figure>
<p>Note that there is no one command for retrieving <strong>only</strong> what we class as shell variables. One way of getting these as output is with a sorted comparison from both of the two previous <code>set</code> and <code>env</code> commands. This is not one hundred percent accurate however. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ comm -23 &lt;(<span class="built_in">set</span> -o posix; <span class="built_in">set</span> | sort) &lt;(env | sort) | less -N</span><br></pre></td></tr></table></figure>
<p>In the last command <code>comm</code> is used to compare the output of <code>set</code> in a sub shell with the output of <code>env</code> in a sub shell, before finally being fed through <code>less</code> .  The two compared outputs are also sorted with <code>sort</code> .</p>
<hr>
<h1 id="3-–-Variable-Definitions"><a href="#3-–-Variable-Definitions" class="headerlink" title="3 – Variable Definitions"></a>3 – Variable Definitions</h1><h2 id="Environment-Variables"><a href="#Environment-Variables" class="headerlink" title="Environment Variables"></a>Environment Variables</h2><p><code>SHELL</code>  – <code>/bin/bash</code></p>
<p>This is how the system knows what shell to be used when interpreting commands. In most Linux systems Bash is the default primary shell, but many others can be installed on the system and assigned to this variable. </p>
<hr>
<p><code>TERM</code> – <code>xterm</code></p>
<p>This specifies the type of terminal to emulate when running the shell. The default in GUI based desktop environments is often <code>linux</code> or <code>xterm</code> .</p>
<hr>
<p><code>USER</code>  – <code>scarlz</code></p>
<p>Is set to the username of the currently logged in Linux user.</p>
<hr>
<p><code>PWD</code> – <code>/etc/apache2</code></p>
<p>Like the <code>pwd</code> command it contains the currently active working directory.</p>
<hr>
<p><code>OLDPWD</code> – <code>/home/scarlz/dotfiles</code></p>
<p>The last working directory the user moved from. The shell uses this when the <code>cd -</code> command is invoked. </p>
<hr>
<p><code>LS_COLORS</code> – <code>*.tar=01;31:*.tgz=01;31:*.arj=01;31:*.taz=01;31:</code></p>
<p>The <code>ls</code> command has built-in colour support used to differentiate between file types and folders. Colour codes are stored in this variable that determine the colours used.  </p>
<hr>
<p><code>PATH</code> – <code>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin</code></p>
<p>The shell’s main “Path” variable holds a list of directories that the system will query when looking for commands/programs the user types in. They are checked in the order listed. </p>
<hr>
<p><code>LANG</code> – <code>en_GB.UTF-8</code></p>
<p>The currently set language and localization in use (locales), including character encoding.</p>
<hr>
<p><code>HOME</code> – <code>/home/scarlz</code></p>
<p>The current user’s home directory.</p>
<hr>
<p><code>_</code>  – <code>/usr/bin/printenv</code></p>
<p>The previously executed command and its path. </p>
<hr>
<p><code>EDITOR</code> – <code>vim</code></p>
<p>The shell’s preferred text editor. </p>
<hr>
<p><code>PAGER</code> – <code>more</code></p>
<p>The shell’s preferred pager program. </p>
<hr>
<p><code>MAIL</code> – <code>/var/spool/mail/$LOGNAME</code></p>
<p>Contains the location of incoming email. The traditional path is used as an example here. </p>
<hr>
<h2 id="Shell-Variables"><a href="#Shell-Variables" class="headerlink" title="Shell Variables"></a>Shell Variables</h2><p><code>BASHOPTS</code> </p>
<p>The list of options that the shell included when bash was run. Useful for finding out if the shell environment currently can do what you expect it to. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$BASHOPTS</span></span><br><span class="line">BASHOPTS=checkwinsize:cmdhist:complete_fullquote:expand_aliases:extglob</span><br></pre></td></tr></table></figure>
<hr>
<p><code>BASH_VERSION</code></p>
<p>The version of bash being executed, in human-readable form.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$BASH_VERSION</span></span><br><span class="line">4.3.11(1)-release</span><br></pre></td></tr></table></figure>
<hr>
<p><code>BASH_VERSINFO</code> </p>
<p>Similar to the last variable except in “<em>machine</em>“ readable format. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$BASH_VERSINFO</span></span><br><span class="line">4</span><br></pre></td></tr></table></figure>
<hr>
<p><code>COLUMNS</code> </p>
<p>The number of columns that are being used to draw output to the screen.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$COLUMNS</span></span><br><span class="line">239</span><br></pre></td></tr></table></figure>
<hr>
<p><code>DIRSTACK</code> </p>
<p>The stack of directories that are available with the <code>pushd</code> and <code>popd</code> commands.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$DIRSTACK</span></span><br><span class="line">~</span><br></pre></td></tr></table></figure>
<hr>
<p><code>HISTFILESIZE</code> </p>
<p>Number of lines of command history that gets stored to the file per bash session.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$HISTFILESIZE</span></span><br><span class="line">2000</span><br></pre></td></tr></table></figure>
<hr>
<p><code>HISTSIZE</code> </p>
<p>The number of lines of command history maximum to be stored in memory.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$HISTSIZE</span></span><br><span class="line">1000</span><br></pre></td></tr></table></figure>
<hr>
<p><code>HOSTNAME</code> </p>
<p>The hostname of the computer at this time.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$HOSTNAME</span></span><br><span class="line">scarlz-corsair</span><br></pre></td></tr></table></figure>
<hr>
<p><code>IFS</code> </p>
<p>The internal field separator character that separates input on the command line. By default, this is a space so there is no real output to show as an example command. </p>
<hr>
<p><code>PS1</code> </p>
<p>The primary command prompt’s definition. Defines quint-essentially what your prompt looks like when you start a shell session. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$PS1</span></span><br><span class="line">\[\e]0;\u@\h: \w\a\]<span class="variable">$&#123;debian_chroot:+($debian_chroot)&#125;</span>\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$</span><br></pre></td></tr></table></figure>
<hr>
<p><code>SHELLOPTS</code> </p>
<p>Any shell options that can be or have been set with the set option.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$SHELLOPTS</span></span><br><span class="line">braceexpand:emacs:hashall:histexpand:<span class="built_in">history</span>:interactive-comments:monitor</span><br></pre></td></tr></table></figure>
<hr>
<p><code>UID</code> </p>
<p>The assigned UID of the current user.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$UID</span></span><br><span class="line">1000</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="4-–-Setting-Variables"><a href="#4-–-Setting-Variables" class="headerlink" title="4 – Setting Variables"></a>4 – Setting Variables</h1><h2 id="Shell-Variables-1"><a href="#Shell-Variables-1" class="headerlink" title="Shell Variables"></a>Shell Variables</h2><p>To create a shell variable in the current shell session, specify a name and a value in the same manner as usual in Bash. Adhering to the naming convention of using full capitals for the variable name. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ EXAMPLE_VAR=<span class="string">'hello world!'</span></span><br></pre></td></tr></table></figure>
<p>Note the single quotation marks used since the string content of our variable contains a space. </p>
<p>Also when special characters like <code>!</code> are used in the string, apostrophes must be inserted instead of double quotes to enclose the the string. </p>
<p><code>!</code> is special character in Bash as it is usually used to expand the shell history.</p>
<p>We can see the newly defined variable by using <code>echo</code> :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$EXAMPLE_VAR</span></span><br><span class="line">hello world!</span><br></pre></td></tr></table></figure>
<p>As said this is only a shell variable within the current Bash session and not an environmental variable. </p>
<p>This can be checked by using <code>printenv</code> :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ printenv EXAMPLE_VAR</span><br><span class="line">hello world!</span><br></pre></td></tr></table></figure>
<p><strong>No</strong> output is returned as the definition is not recognised as part of the environment. </p>
<p>Let’s take this as an opportunity to demonstrate a way of accessing the value of any shell or environmental variable.</p>
<p>Remember like in these example that to reference the value of a variable, precede it with a <code>$</code> sign. This is so the shell knows to substitute the name of the variable for it’s content. </p>
<h2 id="Environment-Variables-1"><a href="#Environment-Variables-1" class="headerlink" title="Environment Variables"></a>Environment Variables</h2><p>To create one, export an existing shell variable into the shell’s persistent environment using the  <code>export</code> command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> EXAMPLE_VAR</span><br></pre></td></tr></table></figure>
<p>This time when we check the variable with <code>printenv</code> it will output.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ printenv EXAMPLE_VAR</span><br><span class="line">hello world!</span><br></pre></td></tr></table></figure>
<p>The variable now descends into a sub shell child process and is retained from the parent, test this by starting anew shell session with <code>bash</code> :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ bash</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$EXAMPLE_VAR</span></span><br><span class="line">hello world!</span><br></pre></td></tr></table></figure>
<p>To bypass having to set a variable and then export it to the environment, the process can be combined like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> INSTANT_ENV_VAR=<span class="string">"instant definition plus export!"</span></span><br></pre></td></tr></table></figure>
<p>Return to the parent shell we came from with <code>exit</code> , and try to <code>echo</code> the previously exported variable:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">exit</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$INSTANT_ENV_VAR</span></span><br></pre></td></tr></table></figure>
<p>Notice <strong>no</strong> output is returned as environment variables can only be passed to child processes, and not the other way around. This is sensible for the most part as it “prevents programs from affecting the operating environment from which they were called”.</p>
<p>Also when you exit back into your main parent shell, the child shell environment is destroyed.</p>
<hr>
<h1 id="5-–-Demoting-and-Unsetting-Variables"><a href="#5-–-Demoting-and-Unsetting-Variables" class="headerlink" title="5 – Demoting and Unsetting Variables"></a>5 – Demoting and Unsetting Variables</h1><p>To change an already set environment variable back into a lesser shell variable use the <code>-n</code> parameter with <code>export</code> :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> -n EXAMPLE_VAR</span><br></pre></td></tr></table></figure>
<p>Now nothing is returned when using <code>printenv</code> on the variable:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ printenv EXAMPLE_VAR</span><br></pre></td></tr></table></figure>
<p>It’s still set as a shell variable so to undefine it completely from this local shell session you can use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">unset</span> EXAMPLE_VAR</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="6-–-Persistent-Variables"><a href="#6-–-Persistent-Variables" class="headerlink" title="6 – Persistent Variables"></a>6 – Persistent Variables</h1><p>To create predefined variables at login depends upon how bash is started and which configuration file it uses to do so. The deciding factors on which file is used relies on the types of “login shell” that have being initiated by the user.</p>
<p>The types being either:</p>
<ul>
<li>Login <strong>or</strong> Non-Login </li>
<li>Interactive <strong>or </strong> Non-Interactive </li>
</ul>
<p>So the two distinctions that are taken into account are whether the shell is being spawned as a “login” or “non-login” session. As well as whether the session is either an “interactive session” or “non-interactive” session.</p>
<h2 id="Login"><a href="#Login" class="headerlink" title="Login"></a>Login</h2><p>A login shell is a shell session that always begins by authenticating the user. If you are signing into a terminal session or through SSH and authenticate, your shell session will be classed and set as a “login” shell.</p>
<p>A session started as a login session will read configuration details from the <code>/etc/profile</code> file first, and then look for the first login shell configuration file it can find in the user’s home directory. In order to get user-specific configuration details.</p>
<p>These files are the first it can find out of <code>~/.bash_profile</code> , <code>~/.bash_login</code> , and <code>~/.profile</code> .</p>
<hr>
<h2 id="Non-Login"><a href="#Non-Login" class="headerlink" title="Non-Login"></a>Non-Login</h2><p>If you start a new shell session from within your authenticated session, like earlier when we called the <code>bash</code> command from the terminal, a non-login shell session is started. This is as you were were not asked for any authentication details when you started the child shell.</p>
<p>A session defined as a non-login shell will always read  <code>/etc/bash.bashrc</code> and then the user-specific <code>~/.bashrc</code> file to help build its environment.</p>
<hr>
<h1 id="Interactive"><a href="#Interactive" class="headerlink" title="Interactive"></a>Interactive</h1><p>An interactive shell session is a shell session that is attached to a terminal and in use. So a normal session that begins with SSH is usually defined as an interactive login shell. See “Non Interactive” in the next section to see the difference between the two. </p>
<hr>
<h2 id="Non-Interactive"><a href="#Non-Interactive" class="headerlink" title="Non-Interactive"></a>Non-Interactive</h2><p>A non-interactive shell session is one that is not attached to a terminal session, and not currently in use. For example a script run from the command line is usually run in a non-interactive, non-login shell.</p>
<p>Most notable non-interactive shells read the environment variable named  <code>BASH_ENV</code> and read the file specified in this variable to construct the new shell environment.</p>
<hr>
<h2 id="Setting-Environment-Variables-at-Login"><a href="#Setting-Environment-Variables-at-Login" class="headerlink" title="Setting Environment Variables at Login"></a>Setting Environment Variables at Login</h2><p>So there are a variety of circumstances that dictate which of the different files are needed to set predefined variables. </p>
<p>This has it’s advantages and gives a lot of flexibility for specific situations where you might want only certain settings for a login shell, and other different settings in a non-login shell. </p>
<p>Despite this to make things easier and more general, most people most of the time will want the same settings for both scenarios. </p>
<p>Depending upon your Linux distribution and personal setup, usually the login configuration files source the non-login configuration files. Meaning that you don’t have to define the variables in both files and can get away with defining environment variables that you want in both <strong>only</strong> inside the non-login configuration files. They will then be read in both scenarios as they’re sourced in the latter. </p>
<p>It’s also best to set them for your individual user and not system wide. so to make them available to both login and non-login shell sessions define these variables in the <code>~/.bashrc</code> .</p>
<p>An example of the line to set a persistent environment variable in the <code>.bashrc</code> file would look like this:</p>
<figure class="highlight bash"><figcaption><span>~/.bashrc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> EXAMPLE_VAR=<span class="string">'hello world!'</span></span><br></pre></td></tr></table></figure>
<p>Which is the same as before whilst on the command line.</p>
<p>The next time you start a shell session, your environment variable declaration(s) are always read and passed on to the shell’s environment (including subsequent child shells too). </p>
<p>You can force your current session to read the config file at any time by typing in a terminal:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>To set them in the system wide files if you prefer, do the same except add the variable definition(s) to: <code>/etc/profile</code> ,  <code>/etc/bash.bashrc</code> , or <code>/etc/environment</code> instead. </p>
<hr>
<p><strong>More Information</strong></p>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-read-and-set-environmental-and-shell-variables-on-a-linux-vps" target="_blank" rel="external">Digital Ocean - How to Read and Set Environmental and Shell Variables on a Linux VPS</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Environment_variables" target="_blank" rel="external">Arch-wiki - Environment Variables Page</a></li>
</ul>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Shell/" class="post__tag__link">Shell</a></li><li class="post__tag__item"><a href="/tags/Bash/" class="post__tag__link">Bash</a></li><li class="post__tag__item"><a href="/tags/Variables/" class="post__tag__link">Variables</a></li></ul><a href="/2015/06/14/notes-bash-env-variables/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-06-08T23:00:00.000Z" class="post__time">June 9, 2015</time><h1 class="post__title"><a href="/2015/06/09/notes-arch-gyazo/">Installing and Configuring Gyazo on Arch Linux with Sxhkd</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/UHrni76.png" alt="Gyazo Ninja"></p>
<p>Gyazo is a free opensource screenshot program available on all desktop platforms including Linux. It allows full screenshot or custom screen area capturing by the user, with uploading of captured images to an online server so they can be accessed anywhere with the uniquely generated public URL.  </p>
<p>A premium “ninja” service is also available that gives users more storage options and further benefits such as image enhancement, text captions, and pointer arrow insertion. </p>
<p>Here are my notes on how to install the program/service onto Arch Linux and bind it to run with an Sxhkd shortcut binding. </p>
<blockquote>
<p><a href="https://gyazo.com" target="_blank" rel="external">Gyazo’s Homepage</a></p>
</blockquote>
<a id="more"></a>
<hr>
<h1 id="1-–-Download-Tarball"><a href="#1-–-Download-Tarball" class="headerlink" title="1 – Download Tarball"></a>1 – Download Tarball</h1><p>Acquire the source code from the Arch User Repository and find somewhere suitable to compile it. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -V https://aur.archlinux.org/packages/gy/gyazo/gyazo.tar.gz</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="2-–-Unpack-Tarball"><a href="#2-–-Unpack-Tarball" class="headerlink" title="2 – Unpack Tarball"></a>2 – Unpack Tarball</h1><p>Unpack and extract the packages that are within the downloaded <code>.tar.gz</code> file. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar -zxvf gyazo.tar.gz</span><br></pre></td></tr></table></figure>
<p>Change into the newly created folder:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> gyazo</span><br></pre></td></tr></table></figure>
<h1 id="3-–-Build-amp-Compile-Package"><a href="#3-–-Build-amp-Compile-Package" class="headerlink" title="3 – Build &amp; Compile Package"></a>3 – Build &amp; Compile Package</h1><p>Use <code>makepkg</code> to link, build, and compile the software inside this directory:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ makepkg PKGBUILD</span><br></pre></td></tr></table></figure>
<p>Download any missing dependencies you’re addressed with through <code>pacman</code> as normal:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -Sy</span><br><span class="line">$ sudo pacman -S imagemagick ruby xclip</span><br></pre></td></tr></table></figure>
<p>If you get the error output that looks like this: </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">==&gt; Validating <span class="built_in">source</span> files with sha256sums...</span><br><span class="line">    master.zip ... FAILED</span><br><span class="line">==&gt; ERROR: One or more files did not pass the validity check!</span><br></pre></td></tr></table></figure>
<p>Run <code>sha256sum</code> on the <code>master.zip</code> file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sha256sum master.zip</span><br></pre></td></tr></table></figure>
<p>You will see a hash value that you need to use, in my case and version it was:</p>
<p><code>58567d7c2a77bae20551c66d203385b64037df7599f431c92f66e3aafe4a6b3f  master.zip</code></p>
<p>Save the value to your clipboard however you see fit. </p>
<p>If you don’t know how to do this then enter the following into your terminal:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sha256sum master.zip | awk <span class="string">'&#123;print $1&#125;'</span> | xclip</span><br></pre></td></tr></table></figure>
<p>Open the <code>PKGBUILD</code> file for writing with your preferred text editor, I’ll be using <code>vim</code> :</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim PKGBUILD</span><br></pre></td></tr></table></figure>
<p>Line 13 needs changing to whatever SHA value was gained from the previous <code>sha256sum</code> command. </p>
<p>You can use your middle mouse button to paste it into the file pending the hash is still in your clipboard from before.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Maintainer: procrastinator</span></span><br><span class="line"></span><br><span class="line">pkgname=gyazo</span><br><span class="line">pkgver=1.0_1</span><br><span class="line">pkgrel=2</span><br><span class="line">pkgdesc=<span class="string">"Launch the Gyazo app and drag your mouse to grab the screen. "</span></span><br><span class="line">arch=(<span class="string">'any'</span>)</span><br><span class="line">url=<span class="string">"http://gyazo.com/"</span></span><br><span class="line">license=(<span class="string">'GPL'</span>)</span><br><span class="line">groups=(multimedia)</span><br><span class="line">depends=(<span class="string">'ruby'</span> <span class="string">'xclip'</span> <span class="string">'imagemagick'</span>)</span><br><span class="line"><span class="built_in">source</span>=(<span class="string">"https://github.com/gyazo/Gyazo-for-Linux/archive/master.zip"</span>)</span><br><span class="line">sha256sums=(<span class="string">'58567d7c2a77bae20551c66d203385b64037df7599f431c92f66e3aafe4a6b3f'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">package</span></span>() &#123;</span><br><span class="line">        <span class="built_in">cd</span> <span class="string">"<span class="variable">$&#123;srcdir&#125;</span>"</span></span><br><span class="line"></span><br><span class="line">  install -D -m755 <span class="string">"<span class="variable">$&#123;srcdir&#125;</span>/Gyazo-for-Linux-master/src/gyazo.rb"</span> \</span><br><span class="line">                                        <span class="string">"<span class="variable">$&#123;pkgdir&#125;</span>/usr/bin/gyazo"</span></span><br><span class="line"></span><br><span class="line">  install -D -m664 <span class="string">"<span class="variable">$&#123;srcdir&#125;</span>/Gyazo-for-Linux-master/src/gyazo.desktop"</span> \</span><br><span class="line">                                        <span class="string">"<span class="variable">$&#123;pkgdir&#125;</span>/usr/share/applications/gyazo.desktop"</span></span><br><span class="line"></span><br><span class="line">  install -D -m664 <span class="string">"<span class="variable">$&#123;srcdir&#125;</span>/Gyazo-for-Linux-master/icons/gyazo.png"</span> \</span><br><span class="line">                                        <span class="string">"<span class="variable">$&#123;pkgdir&#125;</span>/usr/share/pixmaps/gyazo.png"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Run the command we ran earlier to build the package again, this time successfully:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ makepkg PKGBUILD</span><br></pre></td></tr></table></figure>
<p>Seeing the same error message from before again means you didn’t enter the correct hash value, or placed it wrongly in the <code>PKGBUILD</code> file. Go back and amend any discrepancies as needed.  </p>
<hr>
<h1 id="4-–-Install-Compiled-Package"><a href="#4-–-Install-Compiled-Package" class="headerlink" title="4 – Install Compiled Package"></a>4 – Install Compiled Package</h1><p>To continue install the newly built <code>.pkg.tar.xz</code> package to the Arch system repo’s with <code>pacman</code>  and the <code>-U</code> parameter:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -U gyazo-1.0_1-2-any.pkg.tar.xz</span><br></pre></td></tr></table></figure>
<p>Gyazo is now installed and can be run from the command line simply with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gyazo</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Optional-–-Set-Gyazo’s-Web-Browser"><a href="#Optional-–-Set-Gyazo’s-Web-Browser" class="headerlink" title="Optional – Set Gyazo’s Web Browser"></a>Optional – Set Gyazo’s Web Browser</h1><p>Gyazo is at its base an executable ruby script. </p>
<p>The script’s variable values can be altered with a text editor. </p>
<p>Only alter what you know is a good idea and be careful as this could of course cause problems within the program as a whole:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /usr/bin/gyazo</span><br></pre></td></tr></table></figure>
<p>Line 4 can be changed to whatever web browser you want gyazo to open pushed images in. In this instance I’ve set it to run <code>google-chrome-stable</code> . </p>
<p>Others could be <code>firefox</code> , <code>chromium</code> , <code>opera</code> , etc. </p>
<blockquote>
<p><strong>Note:</strong> This is not needed if you have your <code>xdg-open</code> defaults set elsewhere in Linux. </p>
</blockquote>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env ruby</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># setting</span></span><br><span class="line">browser_cmd = <span class="string">'google-chrome-stable'</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="5-–-Login-to-Gyazo"><a href="#5-–-Login-to-Gyazo" class="headerlink" title="5 – Login to Gyazo"></a>5 – Login to Gyazo</h1><p>Login to Gyazo’s website at: </p>
<blockquote>
<p><a href="https://gyazo.com" target="_blank" rel="external">https://gyazo.com</a></p>
</blockquote>
<p>Or sign up for a free account there. </p>
<p>Then connect the client machine you’re setting up Gyazo on when prompted. </p>
<p>Connected machines can be seen in the settings page at:</p>
<blockquote>
<p><a href="https://gyazo.com/settings" target="_blank" rel="external">https://gyazo.com/settings</a></p>
</blockquote>
<hr>
<h1 id="6-–-Sxhkd-Shortcut-Daemon"><a href="#6-–-Sxhkd-Shortcut-Daemon" class="headerlink" title="6 – Sxhkd Shortcut Daemon"></a>6 – Sxhkd Shortcut Daemon</h1><p>Through using a daemon like <code>sxhkd</code> it is possible to bind <code>gyazo</code> to run whenever a certain key combination is pressed and triggered. An alternative would be <a href="https://wiki.archlinux.org/index.php/Xbindkeys" target="_blank" rel="external">Xbindkeys</a> or Xorg’s <a href="https://wiki.archlinux.org/index.php/Xmodmap" target="_blank" rel="external">xmodmap</a>.</p>
<p>I won’t cover installing <code>sxhkd</code> here in these notes but here’s the link to the project and source code on Github if you decide you want to use it:</p>
<blockquote>
<p><a href="https://github.com/baskerville/sxhkd" target="_blank" rel="external">Sxhkd’s Github Page</a></p>
</blockquote>
<p>Go to your <code>sxhkd</code> config file and add the below line to the shown section:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#wm independant hotkeys</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line">ctrl + <span class="built_in">shift</span> + c</span><br><span class="line">    gyazo</span><br></pre></td></tr></table></figure>
<p>Then force sxhkdrc to reload its configuration file. </p>
<p>The default keybinding for this is the combination:</p>
<p><code>SUPER</code> + <code>ESC</code></p>
<p>Now whenever you enter <code>CTRL</code> + <code>SHIFT</code> + <code>c</code> on your keyboard the screen capture grid appears.</p>
<hr>
<p><strong>More Information</strong></p>
<ul>
<li><a href="https://aur.archlinux.org/packages/gyazo/" target="_blank" rel="external">Gyazo Package on the Aur</a> - Index of Gyazo Package on the Aur.</li>
<li><a href="https://wiki.archlinux.org/index.php/Xdg-open" target="_blank" rel="external">Arch Linux Xdg-open Page</a> - From the Official Wiki. </li>
<li><a href="https://wiki.archlinux.org/index.php/Sxhkd" target="_blank" rel="external">Arch Linux Sxhkd Page</a> - From the Official Wiki. </li>
<li><a href="https://github.com/baskerville/sxhkd" target="_blank" rel="external">Sxhkd on Github</a> - The Sxhkd Github repository. </li>
</ul>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Arch/" class="post__tag__link">Arch</a></li><li class="post__tag__item"><a href="/tags/Gyazo/" class="post__tag__link">Gyazo</a></li><li class="post__tag__item"><a href="/tags/Sxhkd/" class="post__tag__link">Sxhkd</a></li></ul><a href="/2015/06/09/notes-arch-gyazo/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-05-17T23:00:00.000Z" class="post__time">May 18, 2015</time><h1 class="post__title"><a href="/2015/05/18/iptables-ipv4/">iptables (IPv4)</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/000yMhS.png" alt="Firewall Logo"></p>
<p>Notes on <code>iptables</code>  including the most used command types and an example of some basic filter table rules. </p>
<blockquote>
<p><strong>Note:</strong> Only IP version 4 examples are covered in this post. </p>
</blockquote>
<a id="more"></a>
<hr>
<h1 id="Tables"><a href="#Tables" class="headerlink" title="Tables"></a>Tables</h1><p>The tables that are present in the system depends on the kernel configuration options and which modules are enabled. </p>
<p>The default table used is the filter table. <code>-t</code> specifies the table to be used when available and needed.</p>
<h2 id="Filter-Table"><a href="#Filter-Table" class="headerlink" title="Filter Table"></a>Filter Table</h2><p>This is the first table and most commonly configured table. </p>
<p>It’s comprised of the following chains:</p>
<ul>
<li><strong>Input</strong> – Intended for incoming packets accessing local sockets.</li>
<li><strong>Forward</strong> – For packets that get routed through the server. </li>
<li><strong>Output</strong> – Is for locally-generated out-going packets. </li>
</ul>
<h2 id="NAT-Table"><a href="#NAT-Table" class="headerlink" title="NAT Table"></a>NAT Table</h2><p>When a packet forms a new connection this is the table that is consulted. </p>
<ul>
<li><strong>Prerouting</strong> – Alters a packet as soon as it comes in. </li>
<li><strong>Output</strong> – Changes locally-generated packets before they are routed.</li>
<li><strong>Postrouting</strong> – Alters packets as they are about to be sent out. </li>
</ul>
<h2 id="Mangle-Table"><a href="#Mangle-Table" class="headerlink" title="Mangle Table"></a>Mangle Table</h2><p>This table is made use of for specialised packet alteration. </p>
<ul>
<li><strong>Prerouting</strong> – Alters a packet as soon as it comes in. </li>
<li><strong>Output</strong> – Changes locally-generated packets before they are routed.</li>
<li><strong>Input</strong> – Packets entering the host itself. </li>
<li><strong>Forward</strong> – Changes locally-generated packets before they are routed.</li>
<li><strong>Postrouting</strong> – Alters packets as they are about to be sent out. </li>
</ul>
<h2 id="Raw-Table"><a href="#Raw-Table" class="headerlink" title="Raw Table"></a>Raw Table</h2><p>Used for setting up exemptions from connection tracking in combination with the <em>NOTRACK</em> target.</p>
<ul>
<li><strong>Prerouting</strong> – Deals with packets arriving via any network interface. </li>
<li><strong>Output</strong> – Changes locally-generated packets before they are routed.</li>
</ul>
<h2 id="Security-Table"><a href="#Security-Table" class="headerlink" title="Security Table"></a>Security Table</h2><p>This table is used for Mandatory Access Control (MAC) networking rules, such as those enabled by the <em>SECMARK</em> and <em>CONNSECMARK</em> targets. It is called after the “Filter Table”. </p>
<ul>
<li><strong>Input</strong> – Intended for incoming packets accessing local sockets.</li>
<li><strong>Output</strong> – Is for locally-generated out-going packets. </li>
<li><strong>Forward</strong> – For packets that get routed through the server. </li>
</ul>
<hr>
<h1 id="Viewing-Rules"><a href="#Viewing-Rules" class="headerlink" title="Viewing Rules"></a>Viewing Rules</h1><p>You can view the current rules in their respective tables with the <code>-L</code> parameter.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -L</span><br></pre></td></tr></table></figure>
<p>Adding the <code>-v</code> parameter (verbose) provides additional information for each rule.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -L -v</span><br></pre></td></tr></table></figure>
<p>Prints line numbers for each rule and <code>-n</code> prints IP addresses and ports where possible. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -vnL --line-numbers</span><br></pre></td></tr></table></figure>
<p>Prints all rules in the selected chain (<code>INPUT</code>), all chain’s rules are printed if none are passed. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -S INPUT</span><br></pre></td></tr></table></figure>
<p>Check whether a rule matching the provided details exists or not with <code>-C</code> .</p>
<p><code>-C</code> uses the same logic as the delete parameter to find matching entries, except it does not write or alter any rules. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -C INPUT -p tcp --dport 80 -j ACCEPT</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Adding-Rules"><a href="#Adding-Rules" class="headerlink" title="Adding Rules"></a>Adding Rules</h1><p>To <em>append</em> a rule to the end of a set of rules, use the <code>-A</code> parameter followed by the chain name and port details.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>To instead <em>insert</em> a rule anywhere amongst a set of rules use the <code>-I</code> parameter with the chain name and port details.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -I INPUT 1 -p tcp --dport 80 -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>To <em>match</em> or add a comment alongside a rule append the following to the end of a rule entry:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-m comment --comment <span class="string">"this is an example comment - comment goes here"</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Removing-Rules"><a href="#Removing-Rules" class="headerlink" title="Removing Rules"></a>Removing Rules</h1><p>Delete a rule by line number with the <code>-D</code> parameter, then chain name, then number that you wish to delete. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -D INPUT 10</span><br></pre></td></tr></table></figure>
<p>Deleting based off of what a rule is doing is also possible, again with <code>-D</code> and then the pre-existing port and rule details. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -D INPUT <span class="_">-s</span> 127.0.0.1 -p tcp --dport 111 -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>To remove the entire active configuration you can use the <code>-F</code> parameter, which <em>flushes</em> all rules and tables. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -F</span><br></pre></td></tr></table></figure>
<p>Adding a chain name deletes that chain, like so:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -F OUTPUT</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Saving-Rules"><a href="#Saving-Rules" class="headerlink" title="Saving Rules"></a>Saving Rules</h1><p>Rules created and inserted are lost upon shutting down the system. There a few different ways of saving the rules and loading them back in again.</p>
<p>Here’s one of them.</p>
<h2 id="Debian-Ubuntu"><a href="#Debian-Ubuntu" class="headerlink" title="Debian / Ubuntu"></a>Debian / Ubuntu</h2><p>The package <code>iptables-persistent</code> once installed automatically loads rules saved in the <code>/etc/iptables.rules.v4</code> file.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install iptables-persistent</span><br><span class="line">$ sudo service iptables-persistent start</span><br></pre></td></tr></table></figure>
<p>To save your rules in the above file run:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables-save &gt; /etc/iptables/rules.v4</span><br></pre></td></tr></table></figure>
<p>You can confirm their entry after with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo less /etc/iptables/rules.v4</span><br></pre></td></tr></table></figure>
<p>These can also be loaded directly into your iptables firewall at any time using:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables-restore &lt; /etc/iptables/rules.v4</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Standard-Filter-Table-Rules"><a href="#Standard-Filter-Table-Rules" class="headerlink" title="Standard Filter Table Rules"></a>Standard Filter Table Rules</h1><p><strong>Local-Host / Loop-back Address Example</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -I INPUT 1 -i lo -j ACCEPT -m comment --comment <span class="string">"allow input on localhost"</span> </span><br><span class="line">$ sudo iptables -I OUTPUT 1 -o lo -j ACCEPT -m comment --comment <span class="string">"allow output on localhost"</span></span><br></pre></td></tr></table></figure>
<p><strong>Maintain Current Connections</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT -m comment --comment <span class="string">"maintain all current connections"</span></span><br></pre></td></tr></table></figure>
<p><strong>Drop All Remaining Incoming Packets</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -A INPUT -j DROP -m comment --comment <span class="string">"Drop All Remaining Packets"</span></span><br></pre></td></tr></table></figure>
<p><strong>Other Standard Rules</strong></p>
<p>These are in the format of a configuration script that you would load into <code>iptables</code>. So are missing the usual command line prefix. </p>
<p>Allows all loopback (<code>lo0</code>) traffic and drop all traffic to <code>127/8</code> that doesn’t use <code>lo0</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -i lo -j ACCEPT</span><br><span class="line">-A INPUT ! -i lo <span class="_">-d</span> 127.0.0.0/8 -j REJECT</span><br></pre></td></tr></table></figure>
<p>Accepts all established inbound connections.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>Allows all outbound traffic, you could modify this to only allow only certain traffic.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A OUTPUT -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>Allows HTTP and HTTPS connections from anywhere (the normal ports for websites).</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -p tcp --dport 80 -j ACCEPT</span><br><span class="line">-A INPUT -p tcp --dport 443 -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>Allows SSH connections.</p>
<p>The <code>--dport</code> number is the same as in <code>/etc/ssh/sshd_config</code> .</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -p tcp -m state --state NEW --dport 22 -j ACCEPT</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note:</strong> The default SSH port is often changed from 22 to avoid unwanted activity. Or even better only allow access from certain IP’s and use SSH keys.</p>
</blockquote>
<p>Allows ping with the next code snippet, be aware that blocking other <strong>types</strong> of ICMP packets is considered a bad idea by some. Hence the <code>icmp-type 8</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -p icmp -m icmp --icmp-type 8 -j ACCEPT</span><br></pre></td></tr></table></figure>
<p>Reject all other inbound packets, aka deny by default unless explicitly allowed as part of other policies:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -j REJECT</span><br><span class="line">-A FORWARD -j REJECT</span><br></pre></td></tr></table></figure>
<hr>
<p><strong>Sources</strong></p>
<ul>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-using-iptables-on-ubuntu-14-04" target="_blank" rel="external">How To Set Up a Firewall Using iptables on Ubuntu 14.04</a></li>
<li><a href="https://major.io/?s=iptables" target="_blank" rel="external">Major.io iptables Posts</a></li>
<li><a href="https://wiki.debian.org/iptables" target="_blank" rel="external">Debian WIki - iptables</a></li>
</ul>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Firewall/" class="post__tag__link">Firewall</a></li><li class="post__tag__item"><a href="/tags/Networking/" class="post__tag__link">Networking</a></li><li class="post__tag__item"><a href="/tags/IP/" class="post__tag__link">IP</a></li></ul><a href="/2015/05/18/iptables-ipv4/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-05-02T23:00:00.000Z" class="post__time">May 3, 2015</time><h1 class="post__title"><a href="/2015/05/03/using-cvim/">cVim Google Chrome Browser Addon</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/PgqGScb.png" alt="Google Chrome Icon"></p>
<p>What features does cVim add to Chrome?</p>
<ul>
<li>Google/IMDB/Wikipedia/Amazon/Duckduckgo/Yahoo/Bing search completion.</li>
<li>Support for custom search engines.</li>
<li>History and Bookmark search/completion with bookmark folder support.</li>
<li>Caret/Visual mode.</li>
<li>Efficient link hints (with support for custom mappings).</li>
<li>Support for custom keyboard mappings.</li>
<li>Regex page search with highlighting.</li>
<li>Command bar with tab-completion.</li>
<li>Smooth scrolling.</li>
</ul>
<a id="more"></a>
<hr>
<h1 id="Installing-cVim"><a href="#Installing-cVim" class="headerlink" title="Installing cVim"></a>Installing cVim</h1><p> <strong>Acquire it by either:</strong></p>
<ol>
<li><p>Installing it through the <a href="https://chrome.google.com/webstore/detail/cvim/ihlenndgcmojhcghmfjfneahoeklbjjh" target="_blank" rel="external">Chrome web store</a>.  </p>
</li>
<li><p>Downloading the <code>.zip</code> file <a href="https://github.com/1995eaton/chromium-vim/archive/master.zip" target="_blank" rel="external">here</a> </p>
<ul>
<li>Enabling it by going to the <code>chrome://extensions</code> URL. </li>
<li>Checking developer mode.</li>
<li>Then pointing Chrome to the unzipped folder via <code>Load unpacked extensions</code>.</li>
</ul>
</li>
</ol>
<hr>
<h1 id="Using-cVim"><a href="#Using-cVim" class="headerlink" title="Using cVim"></a>Using cVim</h1><p>Here’s how to use the addon including an example of the configuration settings and bindings by group. </p>
<h2 id="Settings"><a href="#Settings" class="headerlink" title="Settings"></a>Settings</h2><p>You can sync with a Gist file in the settings of the browser addon.</p>
<blockquote>
<p><a href="https://gist.github.com/sleightz/01275b93fb53a5e53135" target="_blank" rel="external">https://gist.github.com/sleightz/01275b93fb53a5e53135</a></p>
</blockquote>
<hr>
<h2 id="Keybindings"><a href="#Keybindings" class="headerlink" title="Keybindings"></a>Keybindings</h2><blockquote>
<p><strong>Note:</strong> Uppercase bindings are triggered with <code>SHIFT</code> + <code>KEY</code> as normal. </p>
</blockquote>
<p><strong>Basic</strong></p>
<ul>
<li><code>j</code>,<code>s</code>  – scroll down.</li>
<li><code>k</code>,<code>w</code>  – scroll up.</li>
<li><code>h</code> – scroll left.</li>
<li><code>l</code> – scroll right.</li>
</ul>
<p><strong>Page</strong></p>
<ul>
<li><code>gg</code> – scroll to top of the current page.</li>
<li><code>G</code> – scroll to the bottom of the current page. </li>
<li><code>zi</code> – Zoom page in.</li>
<li><code>zo</code> – Zoom page out</li>
<li><code>z0</code> –     Zoom page to original size.</li>
</ul>
<p><strong>Links</strong></p>
<ul>
<li><code>f</code> – open a link in a new tab by pressing the marked keys in the page elements. </li>
<li><code>G</code> – scroll to the bottom of the current page. (<code>SHIFT</code> + <code>g</code>)</li>
<li><code>W</code> –  open a link in a new tab by pressing the marked keys in the page elements. </li>
<li><code>W</code> –  open a link in a new window by pressing the marked keys in the page elements. </li>
<li><code>mf</code> – open multiple links in a new tab by pressing the marked keys in the page elements. </li>
<li><code>gy</code> – Copy a URL from a link to to the <em>clipboard</em>.</li>
</ul>
<p><strong>Tabs</strong></p>
<ul>
<li><code>x</code> – Close the current tab.</li>
<li><code>X</code> – Open the last closed tab. </li>
<li><code>t</code> – Alias for <code>:tabnew</code> .</li>
<li><code>a</code> – An alias to <code>:tabnew google</code> .</li>
<li><code>&lt;</code> – Move current tab left.</li>
<li><code>&gt;</code> – Move current tab right.</li>
</ul>
<p><strong>Tab Navigation</strong></p>
<ul>
<li><code>gt</code>, <code>K</code>, <code>R</code> – Navigate to the next tab. </li>
<li><code>gT</code>, <code>J</code>, <code>E</code>    – Navigate to the previous tab. </li>
<li><code>H</code>, <code>S</code> – Go back a page in current tab. </li>
<li><code>L</code>, <code>D</code> – Go forward a page in current tab. </li>
</ul>
<p><strong>Caret/Visual Mode</strong></p>
<ul>
<li><code>v</code> – Toggle between visual/caret mode.</li>
<li><code>h</code>,<code>j</code>, <code>k</code>, <code>l</code>    – Move the caret position/extend the visual selection    </li>
<li><code>y</code> – Copies the current selection.    </li>
<li><code>ESC</code> – Exit visual mode to caret mode/exit caret mode to normal mode.</li>
</ul>
<hr>
<h2 id="Keybindings-Continued"><a href="#Keybindings-Continued" class="headerlink" title="Keybindings Continued"></a>Keybindings Continued</h2><p><strong>Core</strong></p>
<p><code>:</code> – Open the command bar. </p>
<p><code>.</code>    – Repeat the last command entered.</p>
<p><code>r</code> –     Reload the current tab    . </p>
<p><code>gR</code> –     Reload the current tab + local cache.</p>
<p><code>yy</code> –     Copy the URL of the current page to the clipboard.</p>
<p><strong>Searching</strong></p>
<p><code>/</code>    open search bar</p>
<p><code>n</code> – Next search result    .</p>
<p><code>N</code> – Previous search result.</p>
<p><code>b</code> –    Search through bookmarks.</p>
<p><strong>Misc</strong></p>
<p><code>I</code> – An alias to <code>:history</code> that let’s you search through browser history. </p>
<p><code>zr</code> – Restart Google Chrome.</p>
<p><code>gd</code> – An alias to <code>:chrome://downloads</code></p>
<p><code>P</code> –    Open the clipboard contents in a new tab.</p>
<p><code>gq</code> –     Stop the current tab from loading</p>
<hr>
<h3 id="Command-Mode"><a href="#Command-Mode" class="headerlink" title="Command Mode"></a>Command Mode</h3><p><strong>Core</strong></p>
<p><code>:tabnew</code>(autocomplete) – Open a new tab with the typed/completed search.</p>
<p><code>:new</code> (autocomplete) – Open a new window with the typed/completed search.</p>
<p><code>:open</code> (autocomplete) – Open the typed/completed URL/google search.</p>
<p><code>:quit</code>    Close the current tab</p>
<p><code>:qall</code> Close the current window</p>
<p><code>:duplicate</code> – Duplicate the current tab.</p>
<p><strong>Searching</strong></p>
<p><code>:history</code> (autocomplete) – Search through browser history.</p>
<p><code>:bookmarks</code> (autocomplete) –    Search through bookmarks.</p>
<p><strong>Misc</strong></p>
<p><code>:tabattach</code> (autocomplete) – Move the current tab to another open window.</p>
<p><code>:tabdetach</code> – Move the current tab to a new window.</p>
<p><code>:restore</code> (autocomplete) – Restore a previously closed tab (newer versions of Chrome only).</p>
<p><code>:mksession</code> – Create a new session from the current tabs in the active window.</p>
<hr>
<h1 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h1><ul>
<li><p>You can use <code>@%</code> in <code>open</code> commands to specify the current URL. For example, <code>:open @%</code> would essentially refresh the current page.</p>
</li>
<li><p>Prepend a number to the command to repeat that command <em>N</em> times.</p>
</li>
<li><p>Use the up/down arrows in command/find mode to navigate through previously<br>executed commands/searches.</p>
</li>
<li><p>You can set directives like <code>reloadAllTabs</code> in the settings to a binding.</p>
</li>
</ul>
<hr>
<p><strong>Sources</strong></p>
<ul>
<li><a href="https://github.com/1995eaton/chromium-vim" target="_blank" rel="external">cVim - Vim bindings for Google Chrome</a> – cVim Github page.</li>
</ul>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Chrome/" class="post__tag__link">Chrome</a></li><li class="post__tag__item"><a href="/tags/Browser/" class="post__tag__link">Browser</a></li><li class="post__tag__item"><a href="/tags/Addon/" class="post__tag__link">Addon</a></li></ul><a href="/2015/05/03/using-cvim/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2018 Scarlz</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/topics/Programming/page/6/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><a title="Next" href="/topics/Programming/page/8/" class="page-menu__link icon-arrow-right"></a></li></menu></footer><script>(function(h,g,l,k,j,i){j=h.createElement(g),i=h.getElementsByTagName(g)[0],
j.src="//"+l+".disqus.com/"+k+".js",i.parentNode.insertBefore(j,i)})
(document,"script","totts","count");
</script></body></html>