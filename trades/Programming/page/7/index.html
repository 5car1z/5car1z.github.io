<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="Linux System Administration"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="atom.xml" title="Tricks of the Trades" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>Programming - Tricks of the Trades</title><link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">Tricks of the Trades</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/trades" class="head-nav__link">Trades</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li><li class="head-nav__item"><a href="/work" class="head-nav__link">Work</a></li><li class="head-nav__item"><a href="/about" class="head-nav__link">About</a></li><li class="head-nav__item"><a href="/contact" class="head-nav__link">Contact</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2015-05-02T23:00:00.000Z" class="post__time">May 3, 2015</time><h1 class="post__title"><a href="/2015/05/03/using-cvim/">cVim Google Chrome Browser Addon</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/PgqGScb.png" alt="Google Chrome Icon"></p>
<p>What features does cVim add to Chrome?</p>
<ul>
<li>Google/IMDB/Wikipedia/Amazon/Duckduckgo/Yahoo/Bing search completion.</li>
<li>Support for custom search engines.</li>
<li>History and Bookmark search/completion with bookmark folder support.</li>
<li>Caret/Visual mode.</li>
<li>Efficient link hints (with support for custom mappings).</li>
<li>Support for custom keyboard mappings.</li>
<li>Regex page search with highlighting.</li>
<li>Command bar with tab-completion.</li>
<li>Smooth scrolling.</li>
</ul>
<a id="more"></a>
<hr>
<h1 id="Installing-cVim"><a href="#Installing-cVim" class="headerlink" title="Installing cVim"></a>Installing cVim</h1><p> <strong>Acquire it by either:</strong></p>
<ol>
<li><p>Installing it through the <a href="https://chrome.google.com/webstore/detail/cvim/ihlenndgcmojhcghmfjfneahoeklbjjh" target="_blank" rel="external">Chrome web store</a>.  </p>
</li>
<li><p>Downloading the <code>.zip</code> file <a href="https://github.com/1995eaton/chromium-vim/archive/master.zip" target="_blank" rel="external">here</a> </p>
<ul>
<li>Enabling it by going to the <code>chrome://extensions</code> URL. </li>
<li>Checking developer mode.</li>
<li>Then pointing Chrome to the unzipped folder via <code>Load unpacked extensions</code>.</li>
</ul>
</li>
</ol>
<hr>
<h1 id="Using-cVim"><a href="#Using-cVim" class="headerlink" title="Using cVim"></a>Using cVim</h1><p>Here’s how to use the addon including an example of the configuration settings and bindings by group. </p>
<h2 id="Settings"><a href="#Settings" class="headerlink" title="Settings"></a>Settings</h2><p>You can sync with a Gist file in the settings of the browser addon.</p>
<blockquote>
<p><a href="https://gist.github.com/sleightz/01275b93fb53a5e53135" target="_blank" rel="external">https://gist.github.com/sleightz/01275b93fb53a5e53135</a></p>
</blockquote>
<hr>
<h2 id="Keybindings"><a href="#Keybindings" class="headerlink" title="Keybindings"></a>Keybindings</h2><blockquote>
<p><strong>Note:</strong> Uppercase bindings are triggered with <code>SHIFT</code> + <code>KEY</code> as normal. </p>
</blockquote>
<p><strong>Basic</strong></p>
<ul>
<li><code>j</code>,<code>s</code>  – scroll down.</li>
<li><code>k</code>,<code>w</code>  – scroll up.</li>
<li><code>h</code> – scroll left.</li>
<li><code>l</code> – scroll right.</li>
</ul>
<p><strong>Page</strong></p>
<ul>
<li><code>gg</code> – scroll to top of the current page.</li>
<li><code>G</code> – scroll to the bottom of the current page. </li>
<li><code>zi</code> – Zoom page in.</li>
<li><code>zo</code> – Zoom page out</li>
<li><code>z0</code> –     Zoom page to original size.</li>
</ul>
<p><strong>Links</strong></p>
<ul>
<li><code>f</code> – open a link in a new tab by pressing the marked keys in the page elements. </li>
<li><code>G</code> – scroll to the bottom of the current page. (<code>SHIFT</code> + <code>g</code>)</li>
<li><code>W</code> –  open a link in a new tab by pressing the marked keys in the page elements. </li>
<li><code>W</code> –  open a link in a new window by pressing the marked keys in the page elements. </li>
<li><code>mf</code> – open multiple links in a new tab by pressing the marked keys in the page elements. </li>
<li><code>gy</code> – Copy a URL from a link to to the <em>clipboard</em>.</li>
</ul>
<p><strong>Tabs</strong></p>
<ul>
<li><code>x</code> – Close the current tab.</li>
<li><code>X</code> – Open the last closed tab. </li>
<li><code>t</code> – Alias for <code>:tabnew</code> .</li>
<li><code>a</code> – An alias to <code>:tabnew google</code> .</li>
<li><code>&lt;</code> – Move current tab left.</li>
<li><code>&gt;</code> – Move current tab right.</li>
</ul>
<p><strong>Tab Navigation</strong></p>
<ul>
<li><code>gt</code>, <code>K</code>, <code>R</code> – Navigate to the next tab. </li>
<li><code>gT</code>, <code>J</code>, <code>E</code>    – Navigate to the previous tab. </li>
<li><code>H</code>, <code>S</code> – Go back a page in current tab. </li>
<li><code>L</code>, <code>D</code> – Go forward a page in current tab. </li>
</ul>
<p><strong>Caret/Visual Mode</strong></p>
<ul>
<li><code>v</code> – Toggle between visual/caret mode.</li>
<li><code>h</code>,<code>j</code>, <code>k</code>, <code>l</code>    – Move the caret position/extend the visual selection    </li>
<li><code>y</code> – Copies the current selection.    </li>
<li><code>ESC</code> – Exit visual mode to caret mode/exit caret mode to normal mode.</li>
</ul>
<hr>
<h2 id="Keybindings-Continued"><a href="#Keybindings-Continued" class="headerlink" title="Keybindings Continued"></a>Keybindings Continued</h2><p><strong>Core</strong></p>
<p><code>:</code> – Open the command bar. </p>
<p><code>.</code>    – Repeat the last command entered.</p>
<p><code>r</code> –     Reload the current tab    . </p>
<p><code>gR</code> –     Reload the current tab + local cache.</p>
<p><code>yy</code> –     Copy the URL of the current page to the clipboard.</p>
<p><strong>Searching</strong></p>
<p><code>/</code>    open search bar</p>
<p><code>n</code> – Next search result    .</p>
<p><code>N</code> – Previous search result.</p>
<p><code>b</code> –    Search through bookmarks.</p>
<p><strong>Misc</strong></p>
<p><code>I</code> – An alias to <code>:history</code> that let’s you search through browser history. </p>
<p><code>zr</code> – Restart Google Chrome.</p>
<p><code>gd</code> – An alias to <code>:chrome://downloads</code></p>
<p><code>P</code> –    Open the clipboard contents in a new tab.</p>
<p><code>gq</code> –     Stop the current tab from loading</p>
<hr>
<h3 id="Command-Mode"><a href="#Command-Mode" class="headerlink" title="Command Mode"></a>Command Mode</h3><p><strong>Core</strong></p>
<p><code>:tabnew</code>(autocomplete) – Open a new tab with the typed/completed search.</p>
<p><code>:new</code> (autocomplete) – Open a new window with the typed/completed search.</p>
<p><code>:open</code> (autocomplete) – Open the typed/completed URL/google search.</p>
<p><code>:quit</code>    Close the current tab</p>
<p><code>:qall</code> Close the current window</p>
<p><code>:duplicate</code> – Duplicate the current tab.</p>
<p><strong>Searching</strong></p>
<p><code>:history</code> (autocomplete) – Search through browser history.</p>
<p><code>:bookmarks</code> (autocomplete) –    Search through bookmarks.</p>
<p><strong>Misc</strong></p>
<p><code>:tabattach</code> (autocomplete) – Move the current tab to another open window.</p>
<p><code>:tabdetach</code> – Move the current tab to a new window.</p>
<p><code>:restore</code> (autocomplete) – Restore a previously closed tab (newer versions of Chrome only).</p>
<p><code>:mksession</code> – Create a new session from the current tabs in the active window.</p>
<hr>
<h1 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h1><ul>
<li><p>You can use <code>@%</code> in <code>open</code> commands to specify the current URL. For example, <code>:open @%</code> would essentially refresh the current page.</p>
</li>
<li><p>Prepend a number to the command to repeat that command <em>N</em> times.</p>
</li>
<li><p>Use the up/down arrows in command/find mode to navigate through previously<br>executed commands/searches.</p>
</li>
<li><p>You can set directives like <code>reloadAllTabs</code> in the settings to a binding.</p>
</li>
</ul>
<hr>
<p><strong>Sources</strong></p>
<ul>
<li><a href="https://github.com/1995eaton/chromium-vim" target="_blank" rel="external">cVim - Vim bindings for Google Chrome</a> – cVim Github page.</li>
</ul>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Chrome/" class="post__tag__link">Chrome</a></li><li class="post__tag__item"><a href="/tags/Browser/" class="post__tag__link">Browser</a></li><li class="post__tag__item"><a href="/tags/Addon/" class="post__tag__link">Addon</a></li></ul><a href="/2015/05/03/using-cvim/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-02-18T00:00:00.000Z" class="post__time">February 18, 2015</time><h1 class="post__title"><a href="/2015/02/18/arch-vm-main/">Arch Linux VM Main System Installation</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/v5cFEBC.png" alt="Arch Linux Logo"></p>
<p>This is a continuation of the previous post on installing the base components of Arch. </p>
<p>Except this time I’m detailing the next steps of setting up the main system environment.  </p>
<a id="more"></a>
<hr>
<h1 id="1-–-Initial-Login"><a href="#1-–-Initial-Login" class="headerlink" title="1 – Initial Login"></a>1 – Initial Login</h1><p>Log into the system we created in the previous post this time on the actual file-system we generated (i.e. without the boot media), using the one and only <em>root</em> account currently in existence. Test to see if you have a working internet connection again by using <code>ping</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ping -c 5 www.google.co.uk</span><br><span class="line">$ ping -c 5 8.8.8.8</span><br></pre></td></tr></table></figure>
<p>If you get <code>ping: unknown host www.google.co.uk</code> or <code>connect: Network is unreachable</code> for either of these commands then you need to do the rest of this step (1). </p>
<p>If everything looks fine and you are sending plus receiving through <code>ping</code> with a working internet connection, then move on to step 2 instead. </p>
<p>Find your Ethernet interface name (virtual VM shared host connection interface in this case) using:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ip link</span><br></pre></td></tr></table></figure>
<p>If you are unsure of the name, your Ethernet interface you are looking for is likely to start with the letter “e”, and unlikely to be “lo” or start with the letter “w”. </p>
<p><img src="http://i.gyazo.com/2742bf027aad981b4e3af4652079026a.png" alt="Ethernet interface name"></p>
<p>In my case my interface was named “eno167777736”. So I’ll use that as the example here.</p>
<p>Next make sure the interface is <em>up</em> and running with this command syntax:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ip link <span class="built_in">set</span> eno16777736 up</span><br></pre></td></tr></table></figure>
<p>Substituting the interface name ID with your own.</p>
<p>Then start and enable <code>dhcpcd.service</code> with <code>systemctl</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl <span class="built_in">enable</span> dhcpcd.service</span><br><span class="line">$ systemctl start dhcpcd.service</span><br></pre></td></tr></table></figure>
<p>Attempt a <code>ping</code> once again and this time it should succeed, with the internet connection working correctly. </p>
<p>If despite this there’s no change, try the previous commands again, but this time specifying the interface name in the command like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl <span class="built_in">enable</span> dhcpcd@eno16777736.service</span><br><span class="line">$ systemctl <span class="built_in">enable</span> dhcpcd@eno16777736.service</span><br></pre></td></tr></table></figure>
<p>If still no joy here are some resources that might prove useful. Remember these links are not in the context of a VM installation however.</p>
<ul>
<li><a href="https://bbs.archlinux.org/viewtopic.php?id=141420" target="_blank" rel="external">No wired internet after fresh arch install.</a></li>
<li><a href="https://wiki.archlinux.org/index.php/beginners%27_guide#Establish_an_internet_connection" target="_blank" rel="external">Arch Linux Beginner’s Guide - Establishing an internet connection</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Network_configuration#Static_IP_address" target="_blank" rel="external">Arch Linux Beginner’s Guide - Network Configuration</a></li>
</ul>
<hr>
<h1 id="2-–-pacman-conf"><a href="#2-–-pacman-conf" class="headerlink" title="2 – pacman.conf"></a>2 – pacman.conf</h1><p><strong>If</strong> using a 64-bit system begin editing the <code>/etc/pacman.conf</code> with <code>nano</code>. </p>
<blockquote>
<p><strong>If not using a 64 bit system then move onto Step 3 now.</strong></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/pacman.conf</span><br></pre></td></tr></table></figure>
<p>Now <em>uncomment</em> the two following lines in this file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[multilib]</span><br><span class="line">Include = /etc/pacman.d/mirrorlist</span><br></pre></td></tr></table></figure>
<p>After doing this write/save to the file and exit it. </p>
<p>When back at the shell prompt sync and refresh repositories with <code>pacman</code> by running:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pacman -Sy</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="3-–-User-Creation"><a href="#3-–-User-Creation" class="headerlink" title="3 – User Creation"></a>3 – User Creation</h1><p>Make another user account here so <em>root</em> isn’t the default account in use all the time (bad practice to do so), whilst at the same time adding it to some groups. </p>
<blockquote>
<p><strong>Note:</strong> There are no spaces present between the groups listed in this next command.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ useradd -m -g users -G wheel,storage,power,sys,adm <span class="_">-s</span> /bin/bash scarlz</span><br></pre></td></tr></table></figure>
<p>Set the password for the new user that has just been created.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ passwd scarlz</span><br></pre></td></tr></table></figure>
<p>Install <code>sudo</code> with <code>pacman</code> <strong>if</strong> it did not install as part of your previous base Arch set-up. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pacman -S sudo</span><br></pre></td></tr></table></figure>
<p>If you ever want to see a list of packages related to a search term, you could type the following command, where the package name specified at the end is the “search term”.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pacman -Ss sudo</span><br></pre></td></tr></table></figure>
<p>Now <code>sudo</code> is installed on the system we need to enable it for users belonging to the <code>wheel</code> group in the <em>sudoers</em> file to gain the privileges. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ EDITOR=vi visudo</span><br></pre></td></tr></table></figure>
<p>Find the “user privilege specification” section and <em>uncomment</em> the following line so it looks like this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%wheel ALL=(ALL) ALL</span><br></pre></td></tr></table></figure>
<p>After doing so hit <code>CTRL+X</code> then <code>y</code> and then  <code>ENTER</code>.</p>
<p>I’m also going to install <em>bash completion</em> here to help out before moving onto the next step. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pacman -S bash-completion</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="4-–-VMware-Tools"><a href="#4-–-VMware-Tools" class="headerlink" title="4 – VMware Tools"></a>4 – VMware Tools</h1><p>I’m using Vmware as my virtualisation software in this instance, so here’s how to install the official VMware tools. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pacman -S base-devel net-tools linux-headers</span><br></pre></td></tr></table></figure>
<p>Press <code>ENTER</code> for the default <code>All</code> if prompted by the <code>base-devel</code> package.</p>
<p>Some <strong>Xorg</strong> Vmware related dependencies.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pacman -S xf86-input-vmmouse xf86-video-vmware mesa</span><br></pre></td></tr></table></figure>
<p>Then, create <em>bogus</em> initialisation directories for the installer:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">for</span> x <span class="keyword">in</span> &#123;0..6&#125;; <span class="keyword">do</span> mkdir -p /etc/init.d/rc<span class="variable">$x</span>.d; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>The VMware installer then needs to be mounted in our Arch system:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mount /dev/cdrom /mnt</span><br></pre></td></tr></table></figure>
<p>If you have errors here make sure your VMware software (Workstation in my case) has the latest tools downloaded and updated, and try running VMware “as an Administrator” if using Windows.   </p>
<blockquote>
<p><a href="https://communities.vmware.com/message/2303222#2303222" target="_blank" rel="external">VMware Tools Stuck Downloading in VMware</a></p>
</blockquote>
<p>After this is successfully mounted extract it to <code>/root</code> .</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar xf /mnt/VMwareTools*.tar.gz -C /root</span><br></pre></td></tr></table></figure>
<p>Run the perl script to the install the extracted VMware tools.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ perl /root/vmware-tools-distrib/vmware-install.pl</span><br></pre></td></tr></table></figure>
<blockquote>
<p>You can safely ignore the following build failures:</p>
<ul>
<li>VMNEXT 3 virtual network card</li>
<li><strong>“Warning:</strong> This script could not find mkinitrd or update-initramfs and cannot remake the initrd file!”</li>
</ul>
</blockquote>
<p>Reboot the Virtual Machine:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl reboot</span><br></pre></td></tr></table></figure>
<p>Log in and start VMware Tools:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ /etc/init.d/rc6.d/K99vmware-tools start</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="5-–-Xorg"><a href="#5-–-Xorg" class="headerlink" title="5 – Xorg"></a>5 – Xorg</h1><blockquote>
<p><strong>“Xorg is the public, open-source implementation of the X window system version 11. Since Xorg is the most popular choice among Linux users, its ubiquity has led to making it an ever-present requisite for GUI applications, resulting in massive adoption from most distributions.”</strong></p>
</blockquote>
<p>Now comes the part where we are going to install X server.</p>
<blockquote>
<p><strong>Note:</strong> To use Xorg in a Virtual Machine, a minimum of 32MB VGA memory is needed.</p>
</blockquote>
<p>Install Xorg and some of its companion packages using <code>pacman</code> once again like so:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pacman -S xorg-server xorg-xinit xorg-server-utils</span><br></pre></td></tr></table></figure>
<p>Finally in this section install the default X environment to ensure that all the x-org components we’ve installed prior to this are functioning correctly.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pacman -S xorg-twm xorg-xclock xterm</span><br></pre></td></tr></table></figure>
<p>Type <code>startx</code> to run the X environment.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ startx</span><br></pre></td></tr></table></figure>
<p><img src="http://i.gyazo.com/8eafc4c84a56c06ea0ce6cbeaff63732.png" alt="Default X Environment"></p>
<hr>
<h1 id="Display-amp-Window-Manager"><a href="#Display-amp-Window-Manager" class="headerlink" title="Display &amp; Window Manager"></a>Display &amp; Window Manager</h1><p>Another forthcoming post will go into depth on how to install a tiling window manager (bspwm) and configure <code>.xinitrc</code> to serve as a display manager. With the exception of this being done in the context of a live system, and not a VM. </p>
<p>Alternatively find and research another window manager/desktop environment from the Arch-wiki to setup and install. </p>
<blockquote>
<p><a href="https://wiki.archlinux.org/index.php/Window_manager" target="_blank" rel="external">Arch-wiki Window Managers</a><br><a href="https://wiki.archlinux.org/index.php/Desktop_environment" target="_blank" rel="external">Arch-wiki Desktop Environments</a></p>
</blockquote>
<hr>
<p><strong>More Information</strong></p>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/Installing_Arch_Linux_in_VMware" target="_blank" rel="external">Arch-wiki - Installing Arch Linux in VMware</a> - From the official Wiki. </li>
<li><a href="https://wiki.archlinux.org/index.php/pacman#Installing_packages" target="_blank" rel="external">Arch-wiki Pacman Package Manager</a> - Example commands and switches.</li>
<li><a href="https://wiki.archlinux.org/index.php/Systemd#Using_units" target="_blank" rel="external">Arch-wiki - systemd</a> - Using units (systemctl).</li>
<li><a href="https://wiki.archlinux.org/index.php/Xorg" target="_blank" rel="external">Arch-wiki Xorg Server</a> - Full details on Xorg. </li>
<li><a href="http://lifehacker.com/5680453/build-a-killer-customized-arch-linux-installation-and-learn-all-about-linux-in-the-process" target="_blank" rel="external">Lifehacker Article on Arch Installation</a> - Not for a VM image but useful.</li>
<li><a href="http://www.linuxveda.com/2014/06/07/arch-linux-tutorial/" target="_blank" rel="external">Linux Neda: How to install Arch Linux</a> - Similar to the previous article but also useful. </li>
</ul>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Arch/" class="post__tag__link">Arch</a></li><li class="post__tag__item"><a href="/tags/VM/" class="post__tag__link">VM</a></li><li class="post__tag__item"><a href="/tags/Shell/" class="post__tag__link">Shell</a></li></ul><a href="/2015/02/18/arch-vm-main/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-02-16T00:00:00.000Z" class="post__time">February 16, 2015</time><h1 class="post__title"><a href="/2015/02/16/arch-vm-base/">Arch Linux VM Base Installation</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/v5cFEBC.png" alt="Arch Linux Logo"></p>
<p>I setup the base system components of Arch on a VM recently, here are the notes on one of the many ways of doing this.</p>
<p>So bear in mind that these notes in places are relative to me.    </p>
<blockquote>
<p><a href="https://www.archlinux.org/download/" target="_blank" rel="external">Arch Linux Source Download Page</a></p>
</blockquote>
<a id="more"></a>
<hr>
<h1 id="1-–-Initial-Shell-Prompt"><a href="#1-–-Initial-Shell-Prompt" class="headerlink" title="1 – Initial Shell Prompt"></a>1 – Initial Shell Prompt</h1><p>After being presented with a shell prompt where you are automatically logged in as <em>root</em>. Begin by setting the keyboard language to your relevant country. </p>
<p><strong>The shell in use is Zsh.</strong></p>
<p>Show the possible keyboard layouts available with this command. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ localectl list-keymaps</span><br></pre></td></tr></table></figure>
<p>To set it use <code>loadkeys</code> plus your keyboard layout choice:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ loadkeys uk</span><br></pre></td></tr></table></figure>
<p>The <em>dhcpcd</em> network daemon starts automatically during boot, and it will attempt to start a wired connection by default. </p>
<p>Use <code>ping</code> to check connectivity. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ping -c 5 www.google.co.uk</span><br></pre></td></tr></table></figure>
<p>In a Virtual Machine that shares the host’s network connection, the <code>ping</code> should be successful as long as the host itself is connected and working, when using a <em>bridged</em> hardware network setting. If not this then… improvise.</p>
<hr>
<h1 id="2-–-Partitioning"><a href="#2-–-Partitioning" class="headerlink" title="2 – Partitioning"></a>2 – Partitioning</h1><p>This will list all devices connected to your system along with their partition schemes, including those used to host and boot live Arch installation media (e.g. a USB drive). Not all devices listed will therefore be viable or appropriate mediums for installation. To filter out inappropriate results, use this <code>grep</code>. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ lsblk | grep -v <span class="string">"rom\|loop\|airoot"</span></span><br></pre></td></tr></table></figure>
<p>Devices (e.g. hard drives) will be listed as <em>sdx</em>, where <em>x</em> is a lower-case letter starting from <em>a</em> for the first device (<em>sda</em>), <em>b</em> for the second device (<em>sdb</em>), and so on. For the VM only one device is available (<em>sda</em>) which is the allocated host hard drive space.</p>
<p>Open the device (host HDD) that the partition table is to be created with and create a new <em>MBR</em>/<em>msdos</em> partition table for BIOS systems. All done using the following command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ parted <span class="_">-s</span> /dev/sda mktable msdos</span><br></pre></td></tr></table></figure>
<p>Here I’m making two partitions in total for the VM. The first with line <code>1</code> and second with line <code>2</code>. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ parted <span class="_">-s</span> /dev/sda mkpart primary 0% 100m</span><br><span class="line">$ parted <span class="_">-s</span> /dev/sda mkpart primary 100m 100%</span><br></pre></td></tr></table></figure>
<p>You can run the earlier <code>grep</code> pattern again to see the newly created partitions. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ lsblk | grep -v <span class="string">"rom\|loop\|airoot"</span></span><br></pre></td></tr></table></figure>
<p>Or use <code>parted</code> instead to see the partition table.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ parted /dev/sda <span class="built_in">print</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="3-–-Filesystems"><a href="#3-–-Filesystems" class="headerlink" title="3 – Filesystems"></a>3 – Filesystems</h1><p><code>/boot</code></p>
<p>The boot filesystem is formatted and placed on the first partition created (smaller of the two) with:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkfs.ext2 /dev/sda1</span><br></pre></td></tr></table></figure>
<p><code>/</code></p>
<p>The root filesystem is formatted on the other main partition now via:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkfs.btrfs /dev/sda2</span><br></pre></td></tr></table></figure>
<h1 id="4-–-Mounting"><a href="#4-–-Mounting" class="headerlink" title="4 – Mounting"></a>4 – Mounting</h1><p><code>/mnt/</code></p>
<p>This will <em>mount</em> the main partition:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mount /dev/sda2 /mnt/</span><br></pre></td></tr></table></figure>
<p>Make a boot directory in <code>/mnt/</code> which is now mapped/mounted to <code>/dev/sda2</code> .</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir /mnt/boot</span><br></pre></td></tr></table></figure>
<p>Mount the boot partition to the newly created boot sub-directory in the main root partition.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mount /dev/sda1 /mnt/boot</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="5-–-Mirrors-amp-System-Packages"><a href="#5-–-Mirrors-amp-System-Packages" class="headerlink" title="5 – Mirrors &amp; System Packages"></a>5 – Mirrors &amp; System Packages</h1><p>Begin by appending the system’s <em>mirrorlist</em> file name with <strong>.orig</strong> and the <code>mv</code> command.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mv /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.orig</span><br></pre></td></tr></table></figure>
<p>Then run <code>rankmirrors</code> on the aforementioned file with the <code>-n</code> parameter to find and redirect the fastest <strong>6</strong> mirrors into a new <em>mirrorlist</em> file.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rankmirrors -n 6 /etc/pacman.d/mirrorlist.orig &gt;/etc/pacman.d/mirrorlist</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note:</strong> This takes several minutes to process and complete, have faith and wait…  </p>
</blockquote>
<p>After this use <code>pacman</code> to update and sync the systems package listings. </p>
<p><strong>“Whenever you change your mirrorlist, refresh all package lists with pacman, to ensure that the package lists are updated consistently.”</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pacman -Syy</span><br></pre></td></tr></table></figure>
<p>Next install all the system’s base packages. Time to download packages will vary on your internet connection and the respective mirrors. </p>
<p>Adding a <code>-i</code> parameter to this command enables a prompt for every package to be installed during the process, if preferred.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pacstrap /mnt/ base base-devel</span><br></pre></td></tr></table></figure>
<p>Copy the mirrorlist(s) from earlier over also.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cp /etc/pacman.d/mirrorlist* /mnt/etc/pacman.d</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="6-–-fstab"><a href="#6-–-fstab" class="headerlink" title="6 – fstab"></a>6 – fstab</h1><p>Here generate fstab like so in this directory:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ genfstab -p /mnt/ &gt;&gt;/mnt/etc/fstab</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="7-–-chroot"><a href="#7-–-chroot" class="headerlink" title="7 – chroot"></a>7 – chroot</h1><p><code>chroot</code> into a bash shell in <code>/mnt/</code> .</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ arch-chroot /mnt/ /bin/bash</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="8-–-hostname"><a href="#8-–-hostname" class="headerlink" title="8 – hostname"></a>8 – hostname</h1><p>Set the <code>hostname</code> to today’s date, or whatever you prefer. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"archlinux-vm-<span class="variable">$(date +"%d-%m-%y")</span>"</span> &gt;/etc/hostname</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="9-–-localtime"><a href="#9-–-localtime" class="headerlink" title="9 – localtime"></a>9 – localtime</h1><p>Set the <code>localtime</code> to London’s current time (obviously change this in relation to your own timezone.) </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ln <span class="_">-s</span> /usr/share/zoneinfo/Europe/London /etc/localtime</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="10-–-locale"><a href="#10-–-locale" class="headerlink" title="10 – locale"></a>10 – locale</h1><p><em>Locales</em> define which language the system uses and other regional considerations like currency denomination, numerology and character sets. </p>
<p>Using <code>vi</code> do this:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/locale.gen</span><br></pre></td></tr></table></figure>
<p>Uncomment the relevant language you wish to use (UTF-8 support recommended).</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">en_GB.UTF-8 UTF-8</span><br></pre></td></tr></table></figure>
<p>Then generate the <em>locales</em> .</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ locale-gen</span><br></pre></td></tr></table></figure>
<p>The <code>/etc/locale.conf</code> file does not exist by default. Create it, where <code>LANG</code> refers to the first uncommented entry in <code>/etc/locale.gen</code> from earlier. </p>
<p>See the next command for an example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> LANG=en_GB.UTF-8 &gt; /etc/locale.conf</span><br></pre></td></tr></table></figure>
<p>Lastly export the chosen <em>locale</em>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> LANG=en_GB.UTF-8</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="11-–-passwd"><a href="#11-–-passwd" class="headerlink" title="11 – passwd"></a>11 – passwd</h1><p>Change the root user’s password for the VM.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ passwd</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="12-–-GRUB-Bootloader"><a href="#12-–-GRUB-Bootloader" class="headerlink" title="12 – GRUB Bootloader"></a>12 – GRUB Bootloader</h1><p>Here installation with GRUB and <em>MBR/msdos</em> is demonstrated. </p>
<p>Install the <code>grub</code> package and then run <code>grub-install</code> to install the bootloader:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pacman -S grub</span><br><span class="line">$ grub-install --target=i386-pc --recheck /dev/sda</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Warning:</strong> Change <code>/dev/sda</code> to reflect the drive you installed Arch on if needed. Do not append a partition number, and do not replace it with “sdax” either.</p>
</blockquote>
<p>Next automatically generate the main grub config file.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="13-–-unmount-amp-reboot"><a href="#13-–-unmount-amp-reboot" class="headerlink" title="13 – unmount &amp; reboot"></a>13 – unmount &amp; reboot</h1><p>Exit from the <em>chrooted</em> shell environment:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
<p>While partitions are unmounted automatically by <em>systemd</em> on shutdown, you may do so manually with the next command as a safety measure. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ umount -R /mnt/</span><br></pre></td></tr></table></figure>
<p>Finally if using a CD image you may have to remove it from your VM manager software, before rebooting.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ reboot</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>“Your new Arch Linux base system is now a functional GNU/Linux environment ready to be built into whatever you wish or require.”</strong></p>
</blockquote>
<hr>
<p><strong>More Information</strong></p>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/Beginners%27_guide" target="_blank" rel="external">Arch Linux Beginner’s Guide</a> - From the official Wiki. </li>
<li><a href="http://www.wuputah.com/2013/02/18/quickly-install-an-archlinux-vm-in-15-minutes/" target="_blank" rel="external">wuputah.musings</a> - Quickly Install an Arch Linux VM in 15 minutes.</li>
<li><a href="https://www.archlinux.org/mirrors/status/" target="_blank" rel="external">Arch Linux Mirror Status</a> - Reports various aspects about the mirrors such as network problems with mirrors, data collection problems, the last time mirrors have been synced, etc.</li>
<li><a href="https://wiki.archlinux.org/index.php/GRUB" target="_blank" rel="external">Arch Linux GRUB Article</a> - For more information on configuring and using GRUB, see GRUB.</li>
</ul>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Arch/" class="post__tag__link">Arch</a></li><li class="post__tag__item"><a href="/tags/VM/" class="post__tag__link">VM</a></li><li class="post__tag__item"><a href="/tags/Shell/" class="post__tag__link">Shell</a></li></ul><a href="/2015/02/16/arch-vm-base/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-02-05T00:00:00.000Z" class="post__time">February 5, 2015</time><h1 class="post__title"><a href="/2015/02/05/zsh-basic-configuration/">Ubuntu 14.04 Z Shell (zsh) Installation and Basic Configuration</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/OyNFwff.gif" alt="Z Shell Logo"></p>
<p>Initial notes on installing plus base setup of Z Shell. </p>
<p>Listed here are some of its often touted features. </p>
<ul>
<li>Auto-completion </li>
<li>Auto-correction</li>
<li>Scripting capabilities</li>
<li>Extensibility with modules</li>
<li>Improved globbing</li>
<li>Improved array handling</li>
</ul>
<a id="more"></a>
<hr>
<h1 id="1-–-Installation"><a href="#1-–-Installation" class="headerlink" title="1 – Installation"></a>1 – Installation</h1><p>Update the <code>apt-get</code> package manager’s database.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update</span><br></pre></td></tr></table></figure>
<p>Install <code>zsh</code> through the <code>apt-get</code> package manager.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install zsh</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="2-–-zsh-newuser-install"><a href="#2-–-zsh-newuser-install" class="headerlink" title="2 – zsh-newuser-install"></a>2 – zsh-newuser-install</h1><p>Run Z Shell for the first time to begin the new user config.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ zsh</span><br></pre></td></tr></table></figure>
<p>If it doesn’t run or drop into the config then you can use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ zsh /usr/share/zsh/<span class="built_in">functions</span>/Newuser/zsh-newuser-install <span class="_">-f</span></span><br></pre></td></tr></table></figure>
<p>Which will invoke the new user config manually.</p>
<p>Work through the new prompt screen as directed, typing <code>0</code> remembers an edit but does not save it until it is entered again on the root prompt screen.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(1)  Configure settings <span class="keyword">for</span> <span class="built_in">history</span>, i.e. <span class="built_in">command</span> lines remembered</span><br><span class="line">     and saved by the shell.  (Recommended)</span><br></pre></td></tr></table></figure>
<p>On the first option <code>0</code> will suffice and keeps the default settings.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(2)  Configure the new completion system.  (Recommended.)</span><br></pre></td></tr></table></figure>
<p>On the second option pressing <code>1</code> and turning on completion with default options is enough.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(3)  Configure how keys behave when editing <span class="built_in">command</span> lines.  (Recommended.)</span><br></pre></td></tr></table></figure>
<p>With the third option you can set the key’s shell line editor to behave like Emacs or Vi. Set it with <code>1</code> and press <code>e</code> for emacs and <code>v</code> for vi.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(4)  Pick some of the more common shell options.  These are simple <span class="string">"on"</span></span><br><span class="line">     or <span class="string">"off"</span> switches controlling the shell<span class="string">'s features.</span></span><br></pre></td></tr></table></figure>
<p>In the fourth option I set <strong>1, 2, and 3</strong> to on, enabling them. </p>
<p>Finally entering <code>0</code> at the root menu exits and saves these new settings.</p>
<hr>
<h1 id="3-–-Configuration-Files-Layout"><a href="#3-–-Configuration-Files-Layout" class="headerlink" title="3 – Configuration Files Layout"></a>3 – Configuration Files Layout</h1><p>When Z Shell starts, it sources the following files in this order:</p>
<p><code>/etc/zsh/zshenv</code><br>Commands to set the global command search path and other system-wide environment variables; it should not contain commands that produce output.</p>
<p><code>~/.zshenv</code><br>For per-user configuration. Generally used for setting some useful environment variables.</p>
<p><code>/etc/zsh/zprofile</code><br>This is a global configuration file, usually used for executing some general commands at login. On Arch Linux, by default it contains one line which sources the /etc/profile.</p>
<p><code>/etc/profile</code><br>This file should be sourced by all Bourne-compatible shells upon login: it sets up an environment upon login and application-specific settings. Again on Arch Linux, Z Shell will also source this by default.</p>
<p><code>~/.zprofile</code><br>This file is generally used for automatic execution of user scripts upon login.</p>
<p><code>/etc/zsh/zshrc</code><br>Another global configuration file. </p>
<p><code>~/.zshrc</code><br>The main user configuration file, and the one most often customised by users. This file is the one that will be used and changed in the next section. </p>
<p><code>/etc/zsh/zlogin</code><br>Another global configuration file.</p>
<p><code>~/.zlogin</code><br>Same as the previous file before it, except for individual-user configuration.</p>
<p><code>/etc/zsh/zlogout</code><br>A global configuration file, will be sourced when a login shell exits.</p>
<p><code>~/.zlogout</code><br>Same as the previous file before it, except for individual-user configuration.</p>
<h1 id="4-–-zshrc-Configuration-File"><a href="#4-–-zshrc-Configuration-File" class="headerlink" title="4 – .zshrc Configuration File"></a>4 – .zshrc Configuration File</h1><p>The newly created <code>zsh</code> config file contents we just defined can be seen by opening it with a text editor. I’m using <code>vim</code> in this example. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim ~/.zshrc</span><br></pre></td></tr></table></figure>
<p>At the end of the config file append the following:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">autoload</span> -U promptinit compinit</span><br><span class="line">promptinit</span><br><span class="line">compinit</span><br><span class="line">prompt bart</span><br></pre></td></tr></table></figure>
<p>Where <code>bart</code> is the name of the prompt you wish to use in your Z shell. For my example here I chose the bart theme.</p>
<p>To see possible prompts available and installed follow these commands from a Z shell terminal prompt. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">autoload</span> -U promptinit</span><br><span class="line">$ promptinit</span><br><span class="line">$ prompt p</span><br></pre></td></tr></table></figure>
<p>To apply any changes immediately in the config file you can use:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure>
<p>Or exit and invoke a new Z Shell session.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">exit</span></span><br><span class="line">$ zsh</span><br></pre></td></tr></table></figure>
<p>Finally to make Z Shell your Linux user’s <strong>default</strong> shell on this account enter:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chsh <span class="_">-s</span> $(<span class="built_in">which</span> zsh)</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note:</strong> Do not include <code>sudo</code> with this previous command as it will alter the <em>root</em> user’s default shell instead. </p>
</blockquote>
<p>The <code>$SHELL</code> variable stores your user’s current default shell path. It can be used to confirm the set default shell.  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$SHELL</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Alternative-Method-via-oh-my-zsh"><a href="#Alternative-Method-via-oh-my-zsh" class="headerlink" title="Alternative Method via oh-my-zsh"></a>Alternative Method via oh-my-zsh</h1><blockquote>
<p>Oh-My-Zsh is an open source, community-driven framework for managing your ZSH configuration. It comes bundled with a ton of helpful functions, helpers, plugins, themes, and a few things that make you shout…</p>
</blockquote>
<p>Instead of a manual setup many people choose to use <a href="http://ohmyz.sh/" target="_blank" rel="external">oh-my-zsh</a> to manage their zsh installations.</p>
<p>It can be acquired most easily by using either <code>curl</code> <strong>or</strong> <code>wget</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -L http://install.ohmyz.sh | sh</span><br></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget --no-check-certificate http://install.ohmyz.sh -O - | sh</span><br></pre></td></tr></table></figure>
<p>Enable any of the plugins you want in your <code>~/.zshrc</code> config file by setting them active:</p>
<figure class="highlight bash"><figcaption><span>~/.zshrc </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plugins=(git ruby)</span><br></pre></td></tr></table></figure>
<p>Change the <code>ZSH_THEME</code> environment variable in your <code>~/.zshrc</code> to enable any of themes included in the package. </p>
<figure class="highlight bash"><figcaption><span>~/.zshrc </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZSH_THEME=<span class="string">"af-magic"</span></span><br></pre></td></tr></table></figure>
<p>Furthermore you can <em>uncomment</em> any disabled options in this file if you want them active and enabled. </p>
<hr>
<p><strong>More Information</strong></p>
<ul>
<li><a href="http://zsh.sourceforge.net/FAQ/zshfaq01.html#l8" target="_blank" rel="external">I don’t have root access: how do I make zsh my login shell?</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Zsh" target="_blank" rel="external">Z Shell Arch Linux Wiki Page</a></li>
<li><a href="https://github.com/robbyrussell/oh-my-zsh/" target="_blank" rel="external">oh-my-zsh on Github</a></li>
<li><a href="http://www.bash2zsh.com/zsh_refcard/refcard.pdf" target="_blank" rel="external">zsh Reference Card</a></li>
</ul>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Ubuntu/" class="post__tag__link">Ubuntu</a></li><li class="post__tag__item"><a href="/tags/Shell/" class="post__tag__link">Shell</a></li><li class="post__tag__item"><a href="/tags/zsh/" class="post__tag__link">zsh</a></li></ul><a href="/2015/02/05/zsh-basic-configuration/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2015-01-15T00:00:00.000Z" class="post__time">January 15, 2015</time><h1 class="post__title"><a href="/2015/01/15/web-deployment-git-hooks/">Git Version Control (4) - Web Server Deployment with Git Hooks</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/p0i25Hx.png" alt="Github Logo"></p>
<p>This brief post demonstrates a basic example of how to use a Git hook for web server deployment on Debian 7 (Wheezy). </p>
<ul>
<li>Web server live directory: <code>/var/www</code></li>
<li>Web server live directory with virtual hosts: <code>/var/www/www.exampledomain.com</code></li>
<li>VPS “live” repository: <code>/var/repo-name/project-name</code></li>
</ul>
<a id="more"></a>
<hr>
<p>Firstly SSH into your server or VPS and create the following folders in their respective directories. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var</span><br><span class="line">$ mkdir repository-name</span><br><span class="line">$ <span class="built_in">cd</span> repository-name</span><br><span class="line">$ mkdir project-name </span><br><span class="line">$ <span class="built_in">cd</span> project-name</span><br></pre></td></tr></table></figure>
<p>You will of course need Git version control installed on this server! If you haven’t do it now:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install git</span><br></pre></td></tr></table></figure>
<p>Next use <code>--bare</code> to initialise only the version control components of Git and not any other of the source files. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init --bare</span><br></pre></td></tr></table></figure>
<p>Change into the <code>hooks</code> directory and create a text file named <code>post-receive</code> and begin writing to it. I’m using Vim in this example. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> hooks</span><br><span class="line">$ vim post-receive</span><br></pre></td></tr></table></figure>
<p>Enter the following lines for a single web server host, or <strong>skip</strong> to the next code block for multiple virtual hosts. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">git --work-tree=/var/www --git-dir=/var/loy-web/loy-website checkout <span class="_">-f</span></span><br></pre></td></tr></table></figure>
<p>For multiple virtual hosts enter these set of commands instead:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">git --work-tree=/var/www/www.example-domain.com --git-dir=/var/repo-name/project-name checkout <span class="_">-f</span></span><br></pre></td></tr></table></figure>
<p>Turn the newly created and completed <code>post-receive</code> file into a an executable file. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x post-receive</span><br></pre></td></tr></table></figure>
<p>On a user’s local Git repository (the repository used previously for the same project, and for development of the website) add the remote path of our server repository like so.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add live ssh://user@vps_address/var/repo-name/project-name</span><br></pre></td></tr></table></figure>
<p>Push to the ‘live’ remote on the ‘master’ branch, which will then update the specified web server hosting directory. Which in this case was <code>/var/www</code> <strong>or</strong> <code>/var/www/www.example-domain.com</code> for multiple virtual hosts. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push live master</span><br></pre></td></tr></table></figure>
<p>Assuming your permissions are correct on your server (and the web server itself is running correctly) you can now visit your web server’s address in a browser, to see the website/files held in the aforementioned Git repository!</p>
<p>That’s all there is to it - a primitive example of how to deploy the contents of a Git repository to a live web hosted directory, using Git hooks. </p>
<p><a href="http://www.tricksofthetrades.net/trades/">Links to subsequent Git posts can be found on the Trades page.</a></p>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Debian/" class="post__tag__link">Debian</a></li><li class="post__tag__item"><a href="/tags/VPS/" class="post__tag__link">VPS</a></li><li class="post__tag__item"><a href="/tags/Git/" class="post__tag__link">Git</a></li></ul><a href="/2015/01/15/web-deployment-git-hooks/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2017 Scarlz</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/trades/Programming/page/6/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><a title="Next" href="/trades/Programming/page/8/" class="page-menu__link icon-arrow-right"></a></li></menu></footer><script>(function(h,g,l,k,j,i){j=h.createElement(g),i=h.getElementsByTagName(g)[0],
j.src="//"+l+".disqus.com/"+k+".js",i.parentNode.insertBefore(j,i)})
(document,"script","totts","count");
</script></body></html>