<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content="ToTT"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="atom.xml" title="Tricks of the Trades" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>Programming - Tricks of the Trades</title><link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">Tricks of the Trades</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li><li class="head-nav__item"><a href="/trades" class="head-nav__link">Trades</a></li><li class="head-nav__item"><a href="/work" class="head-nav__link">Work</a></li><li class="head-nav__item"><a href="/about" class="head-nav__link">About</a></li><li class="head-nav__item"><a href="/contact" class="head-nav__link">Contact</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2014-10-17T23:00:00.000Z" class="post__time">October 18, 2014</time><h1 class="post__title"><a href="/2014/10/18/hexo-strict-theme-styling-alterations/">Hexo Strict Theme Styling Alterations</a></h1></header><div class="post__main echo"><p>I use a modified version of “unmric’s” <a href="https://github.com/unmric/hexo-theme-strict" target="_blank" rel="external">hexo strict theme</a> for my site. Most of the changes were aimed at making the code blocks and fonts more readable, and hopefully make for a better viewing experience for myself and others. UX and all that shizz. </p>
<p><img src="https://camo.githubusercontent.com/19ac1229ecc81c7962e38c22b49be26f9351283b/687474703a2f2f692e696d6775722e636f6d2f4130634b5750682e706e67" alt="unmrics default strict theme"></p>
<a id="more"></a>
<hr>
<h1 id="Custom-Fonts-amp-Hex-Values"><a href="#Custom-Fonts-amp-Hex-Values" class="headerlink" title="Custom Fonts &amp; Hex Values"></a>Custom Fonts &amp; Hex Values</h1><p><code>strict/source/css/_var.styl</code></p>
<p>I imported two new font files and changed the variables to use them. Whilst also amending some of the other variable values to brighter hex colours. Such as with link colouring and hovering, and syntax highlighting in code snippets. </p>
<p>The base colours of site text was made black instead of grey too for readability. </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">@font-face</span><br><span class="line">	<span class="attribute">font-family</span>: <span class="string">'CaviarDreams'</span></span><br><span class="line">	src: url(<span class="string">"../fonts/CaviarDreams.ttf"</span>) format(<span class="string">'truetype'</span>)</span><br><span class="line">	</span><br><span class="line">@font-face</span><br><span class="line">	<span class="attribute">font-family</span>: <span class="string">'SourceCodePro-Regular'</span></span><br><span class="line">	src: url(<span class="string">"../fonts/SourceCodePro-Regular.ttf"</span>) format(<span class="string">'truetype'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Base</span></span><br><span class="line"><span class="variable">$base</span>-<span class="attribute">background</span> = <span class="number">#eee</span></span><br><span class="line"><span class="variable">$base</span>-<span class="attribute">font-size</span> = <span class="number">18px</span></span><br><span class="line"><span class="variable">$base</span>-<span class="attribute">font</span>-color = <span class="number">#000000</span></span><br><span class="line"><span class="variable">$base</span>-<span class="attribute">line-height</span> = <span class="number">1.6em</span></span><br><span class="line"><span class="variable">$base</span>-<span class="attribute">font-family</span> = <span class="string">'CaviarDreams'</span>, sans-serif</span><br><span class="line"><span class="variable">$base</span>-code-<span class="attribute">font-family</span> = <span class="string">'SourceCodePro-Regular'</span>, Consolas, <span class="string">'Liberation Mono'</span>, Courier, monospace, serif</span><br><span class="line"><span class="variable">$base</span>-link-<span class="attribute">color</span> = <span class="number">#0645ad</span></span><br><span class="line"><span class="variable">$base</span>-link-<span class="attribute">color</span>-hover = <span class="number">#0645ad</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Code Color</span></span><br><span class="line"><span class="variable">$highlight</span>-<span class="attribute">background</span> = <span class="number">#2d2d2d</span></span><br><span class="line"><span class="variable">$highlight</span>-current-line = <span class="number">#393939</span></span><br><span class="line"><span class="variable">$highlight</span>-selection = <span class="number">#515151</span></span><br><span class="line"><span class="variable">$highlight</span>-foreground = <span class="number">#cccccc</span></span><br><span class="line"><span class="variable">$highlight</span>-comment = <span class="number">#ffffff</span></span><br><span class="line"><span class="variable">$highlight</span>-red = <span class="number">#f2777a</span></span><br><span class="line"><span class="variable">$highlight</span>-orange = <span class="number">#f99157</span></span><br><span class="line"><span class="variable">$highlight</span>-yellow = <span class="number">#ffcc66</span></span><br><span class="line"><span class="variable">$highlight</span>-green = <span class="number">#84be6a</span></span><br><span class="line"><span class="variable">$highlight</span>-aqua = <span class="number">#66cccc</span></span><br><span class="line"><span class="variable">$highlight</span>-blue = <span class="number">#6699cc</span></span><br><span class="line"><span class="variable">$highlight</span>-purple = <span class="number">#cc99cc</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Default-Font-Punctuation-Issues"><a href="#Default-Font-Punctuation-Issues" class="headerlink" title="Default Font Punctuation Issues"></a>Default Font Punctuation Issues</h1><p><code>strict/source/css/_var.styl</code></p>
<p>The default font types used by the theme are eastern/asian in origin and appear to display whitespace between apostrophes ( ‘ ) and quotation marks ( “ ) depending on different browsers and their configs (See line 6).</p>
<figure class="highlight stylus"><figcaption><span>Strict Theme Default Code</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Base</span></span><br><span class="line"><span class="variable">$base</span>-<span class="attribute">background</span> = <span class="number">#eee</span></span><br><span class="line"><span class="variable">$base</span>-<span class="attribute">font-size</span> = <span class="number">14px</span></span><br><span class="line"><span class="variable">$base</span>-<span class="attribute">font</span>-color = <span class="number">#666</span></span><br><span class="line"><span class="variable">$base</span>-<span class="attribute">line-height</span> = <span class="number">1.6em</span></span><br><span class="line"><span class="variable">$base</span>-<span class="attribute">font-family</span> = <span class="string">'Helvetica Neue'</span>, <span class="string">'Hiragino Sans GB'</span>, <span class="string">'WenQuanYi Micro Hei'</span>, <span class="string">'Microsoft Yahei'</span>, sans-serif</span><br><span class="line"><span class="variable">$base</span>-code-<span class="attribute">font-family</span> = <span class="string">'Source Code Pro'</span>, Consolas, <span class="string">'Liberation Mono'</span>, Courier, monospace, serif</span><br><span class="line"><span class="variable">$base</span>-link-<span class="attribute">color</span> = <span class="number">#258fb8</span></span><br><span class="line"><span class="variable">$base</span>-link-<span class="attribute">color</span>-hover = <span class="number">#258fb8</span></span><br></pre></td></tr></table></figure>
<p>I added a suitable new font file to the themes source directories (<code>strict/source/fonts</code>) as mentioned previously. Then referenced it directly into the <code>_var</code> stylus file, and altered the <code>$base-font-family</code> variable to reflect this. </p>
<p>Shown below:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">font-family</span>: <span class="string">'CaviarDreams'</span></span><br><span class="line">	src: url(<span class="string">"../fonts/CaviarDreams.ttf"</span>) format(<span class="string">'truetype'</span>)</span><br><span class="line">	</span><br><span class="line"><span class="variable">$base</span>-<span class="attribute">font-family</span> = <span class="string">'CaviarDreams'</span>, sans-serif</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Code-Snippet-Formatting"><a href="#Code-Snippet-Formatting" class="headerlink" title="Code Snippet Formatting"></a>Code Snippet Formatting</h1><p><code>strict/source/css/_base.styl</code></p>
<p>To make line numbers and non syntax highlighted code brighter it was necessary to split a section of page formatting up in this file. </p>
<p>This was done by adding the global variable <code>color: $highlight-comment</code> to three elements. This changed all snippet colouring as intended. </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">kbd</span>, pre, <span class="selector-tag">samp</span></span><br><span class="line">    <span class="attribute">font-family</span>: <span class="variable">$base</span>-code-font-family</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">$highlight</span>-comment</span><br><span class="line">    </span><br><span class="line"><span class="selector-tag">code</span> </span><br><span class="line">    <span class="attribute">font-family</span>: <span class="variable">$base</span>-code-font-family</span><br></pre></td></tr></table></figure>
<p><code>strict/source/css/vendor/_highlight.styl</code></p>
<p>Labels and titles in code snippets were set to a grey hex value within the <code>_highlight.styl</code> file.</p>
<p>Like previously I changed the value to white so it’s now more readable and stands out. </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">figcaption</span><br><span class="line">    margin-bottom: 1em</span><br><span class="line">    color: #FFFFFF</span><br><span class="line">    font-size: .85em</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Font-Sizing-amp-Colouring-Part-1"><a href="#Font-Sizing-amp-Colouring-Part-1" class="headerlink" title="Font Sizing &amp; Colouring - Part 1."></a>Font Sizing &amp; Colouring - Part 1.</h1><p><code>strict/source/css/partial/_post.styl</code></p>
<p>Added <code>font-size: 18px</code> to enlarge the body text size in posts. </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post__main</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">60px</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span></span><br></pre></td></tr></table></figure>
<p>Added <code>font-size: 16px</code> to make the code in code blocks larger.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.highlight</span></span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">1.6em</span> -<span class="number">60px</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">30px</span></span><br></pre></td></tr></table></figure>
<p>Changed the date on posts to black <code>color: #000000</code> instead of grey. </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post__time</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000000</span></span><br><span class="line">  <span class="attribute">font-size</span>-rem(<span class="number">12</span>)</span><br></pre></td></tr></table></figure>
<p>Changed the titles on posts to black instead of grey. </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post__title</span></span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">5px</span></span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.3</span></span><br><span class="line">  <span class="comment">// 1.6 * 16</span></span><br><span class="line">  <span class="attribute">font-size</span>-rem(<span class="number">25.6</span>)</span><br><span class="line">  <span class="attribute">font-weight</span>: normal</span><br><span class="line">  &gt; <span class="selector-tag">a</span></span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#000000</span></span><br></pre></td></tr></table></figure>
<p>Changed the “Comments” link on posts to black <code>color: #000000</code> from grey, and blue <code>#0645AD</code> on mouse hover. </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post__foot-link</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000000</span></span><br><span class="line">  <span class="attribute">font-size</span>-rem(<span class="number">12</span>)</span><br><span class="line">  &amp;:hover</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#0645AD</span></span><br></pre></td></tr></table></figure>
<p>Changed tag links on posts to black <code>color: #000000</code> by default and blue <code>#0645AD</code> on mouse hover. </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post__tag__link</span></span><br><span class="line">  @extend <span class="selector-class">.post__foot-link</span></span><br><span class="line">  <span class="attribute">display</span>: block</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000000</span></span><br><span class="line">  &amp;:hover</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#0645AD</span></span><br><span class="line">  &amp;:before </span><br><span class="line">    <span class="attribute">content</span>: <span class="string">"#"</span></span><br></pre></td></tr></table></figure>
<p>Changed the “Read More” button text on posts to have a white background <code>color: #FFFFFF</code> by default, with black text, and blue text <code>#0645AD</code> on mouse hover. </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post__more</span></span><br><span class="line">  @extend <span class="selector-class">.post__foot-link</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span></span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#BBBBBB</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">3px</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#FFFFFF</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#000000</span></span><br><span class="line">  &amp;:hover</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#0645AD</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Font-Sizing-amp-Colouring-Part-2"><a href="#Font-Sizing-amp-Colouring-Part-2" class="headerlink" title="Font Sizing &amp; Colouring - Part 2."></a>Font Sizing &amp; Colouring - Part 2.</h1><p><code>strict/source/css/_var.styl</code></p>
<p>Changed <code>$base-font-color</code> variable to make all body text black instead of grey. </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ base-<span class="attribute">font</span>-color = <span class="number">#000000</span></span><br></pre></td></tr></table></figure>
<p>Changed <code>$base-font-size</code> variable to make the navbar links text at the top right more inline with the rest of the font sizing.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ base-<span class="attribute">font-size</span> = <span class="number">18px</span></span><br></pre></td></tr></table></figure>
<p>Changed both types of global text link variables to the previously used darker blue <code>#0645AD</code> for consistency. </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$base</span>-link-<span class="attribute">color</span> = <span class="number">#0645AD</span></span><br><span class="line"><span class="variable">$base</span>-link-<span class="attribute">color</span>-hover = <span class="number">#0645AD</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Font-Sizing-amp-Colouring-Part-3"><a href="#Font-Sizing-amp-Colouring-Part-3" class="headerlink" title="Font Sizing &amp; Colouring - Part 3."></a>Font Sizing &amp; Colouring - Part 3.</h1><p><code>strict/source/css/partial/_main.styl</code></p>
<p>Changed the navbar links to be white both on hover over and off. </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.head-nav__link</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#FFFFFF</span></span><br><span class="line">  &amp;:hover</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#FFFFFF</span></span><br><span class="line">    <span class="attribute">text-decoration</span>: underline</span><br></pre></td></tr></table></figure>
<p>Changed the copyright symbol &amp; text links to white. </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.foot-copy</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#FFFFFF</span></span><br><span class="line">  <span class="attribute">font-size</span>-rem(<span class="number">12</span>)</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h1><p><code>strict/source/css/partial/_main.styl</code></p>
<p>Made the width of the main header, body, and footer wider increasing it to <code>1200px</code>. Was originally <code>900px</code>.</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.head</span></span><br><span class="line"><span class="selector-class">.main</span></span><br><span class="line"><span class="selector-class">.foot</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1200px</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Google-Analytics"><a href="#Google-Analytics" class="headerlink" title="Google Analytics"></a>Google Analytics</h1><p>Added some Google Analytics code into the <em>Jade</em> template files for rendering. </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">b,o,i,l,e,r</span>)</span>&#123;b.GoogleAnalyticsObject=l;</span><br><span class="line">b[l]||(b[l]=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;(b[l].q=b[l].q||[]).push(<span class="built_in">arguments</span>)&#125;);b[l].l=+<span class="keyword">new</span> <span class="built_in">Date</span>;</span><br><span class="line">e=o.createElement(i);r=o.getElementsByTagName(i)[<span class="number">0</span>];</span><br><span class="line">e.src=<span class="string">'//www.google-analytics.com/analytics.js'</span>;</span><br><span class="line">r.parentNode.insertBefore(e,r)&#125;(<span class="built_in">window</span>,<span class="built_in">document</span>,<span class="string">'script'</span>,<span class="string">'ga'</span>));</span><br><span class="line">ga(<span class="string">'create'</span>,<span class="string">'#&#123;theme.google_analytics&#125;'</span>);ga(<span class="string">'send'</span>,<span class="string">'pageview'</span>);</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>This is useful to have as record of all the changes I’ve made. I’ll likely update this post if I alter more of the theme in the future. </p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Hexo/" class="post__tag__link">Hexo</a></li><li class="post__tag__item"><a href="/tags/Stylus/" class="post__tag__link">Stylus</a></li><li class="post__tag__item"><a href="/tags/Typography/" class="post__tag__link">Typography</a></li></ul><a href="/2014/10/18/hexo-strict-theme-styling-alterations/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article><article class="post"><header class="post__head"><time datetime="2014-10-12T23:00:00.000Z" class="post__time">October 13, 2014</time><h1 class="post__title"><a href="/2014/10/13/vps-basic-checklist/">Debian 7 (Wheezy) VPS Basic Checklist</a></h1></header><div class="post__main echo"><p><img src="http://i.imgur.com/JXNdLSN.png" alt="VPS Cloud"></p>
<h1 id="Preamble"><a href="#Preamble" class="headerlink" title="Preamble"></a>Preamble</h1><p>This is intended primarily as a set of notes for myself but you might find the listed items of use, as the following are often commonplace and somewhat standardly used. </p>
<p>Consider also that a persons needs for configuring a VPS will be tailored to their own requirements, criteria, and preferences. These are notes mostly for my benefit.  </p>
<p><strong>This post is focused around Debian and its derivatives.</strong> </p>
<a id="more"></a>
<hr>
<h1 id="Admin-Account"><a href="#Admin-Account" class="headerlink" title="Admin Account"></a>Admin Account</h1><p>Assuming initial root access for this section:</p>
<p><strong>Add a new user</strong> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ adduser scarlz</span><br></pre></td></tr></table></figure>
<p><strong>Add the newly created user to the <code>sudo</code> elevation privileges group</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ adduser scarlz sudo</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Repositories-Packages"><a href="#Repositories-Packages" class="headerlink" title="Repositories/Packages"></a>Repositories/Packages</h1><p>SSH into the newly created user, and use from now onwards.</p>
<figure class="highlight bash"><figcaption><span>username@the.vps.ip.address</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh scarlz@the.vps.ip.address</span><br></pre></td></tr></table></figure>
<p><strong>Make sure system repositories are up to date</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get update </span><br><span class="line">$ sudo apt-get upgrade</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="LAMP"><a href="#LAMP" class="headerlink" title="LAMP"></a>LAMP</h1><h2 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h2><p><strong>Install apache web server</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install apache2</span><br></pre></td></tr></table></figure>
<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><p><strong>Install MySQL and complete the prompts</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install mysql-server</span><br></pre></td></tr></table></figure>
<h2 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h2><p><strong>Install PHP</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install php5-common libapache2-mod-php5 php5-cli</span><br></pre></td></tr></table></figure>
<p><a href="http://php.net/manual/en/install.unix.debian.php" target="_blank" rel="external">PHP Official Debian GNU/Linux Installation Notes</a></p>
<hr>
<h1 id="SSH-Default-Port-amp-Root-Access"><a href="#SSH-Default-Port-amp-Root-Access" class="headerlink" title="SSH Default Port &amp; Root Access"></a>SSH Default Port &amp; Root Access</h1><p><strong>Change the VPS’s default SSH port &amp; Disable Root login</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>
<p><em>Change the “Port 22” entry to any number between 1025 and 65536</em></p>
<blockquote>
<p><strong>Port 3267</strong></p>
</blockquote>
<ul>
<li>Change the “PermitRootLogin yes” entry to “PermitRootLogin without-password”*</li>
</ul>
<p>This means only users with public SSH keys registered in the authorised keys file can log in as root. </p>
<blockquote>
<p><strong>PermitRootLogin without-password</strong></p>
</blockquote>
<p><strong>Restart SSH</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service ssh restart</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="SSH-Keys"><a href="#SSH-Keys" class="headerlink" title="SSH Keys"></a>SSH Keys</h1><p>On the client machine.</p>
<p><strong>Generate RSA key pair</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>
<p><strong>Copy public key into the authorized_keys file on the VPS</strong> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-copy-id scarlz@the.vps.ip.address</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="iptables-Setup"><a href="#iptables-Setup" class="headerlink" title="iptables Setup"></a>iptables Setup</h1><p><strong>Display current rules in table</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -L -v</span><br></pre></td></tr></table></figure>
<p><strong>Add standard rules</strong></p>
<p>Line 4 below <code>--dport 3267</code> Should be whatever value SSH was altered to earlier on.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -A INPUT -i lo -j ACCEPT -m comment --comment <span class="string">"allow loopback address"</span></span><br><span class="line">$ sudo iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT -m comment --comment <span class="string">"maintain all current connections"</span></span><br><span class="line">$ sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT -m comment --comment <span class="string">"allow connections on port 80 HTTP"</span></span><br><span class="line">$ sudo iptables -A INPUT -p tcp --dport 3267 -j ACCEPT -m comment --comment <span class="string">"allow connections on port 3267 SSH"</span></span><br></pre></td></tr></table></figure>
<h2 id="ICMP-Ping-Rules"><a href="#ICMP-Ping-Rules" class="headerlink" title="ICMP (Ping) Rules"></a>ICMP (Ping) Rules</h2><p><strong>Create an IP address variable</strong></p>
<figure class="highlight bash"><figcaption><span>SERVER_IP=your.vps.server.ip</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ SERVER_IP=189.56.33.99</span><br></pre></td></tr></table></figure>
<p><strong>Add <code>echo-reply</code> and <code>echo-request</code> rules</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -A INPUT -p icmp --icmp-type 8 <span class="_">-s</span> 0/0 <span class="_">-d</span> <span class="variable">$SERVER_IP</span> -m state --state NEW,ESTABLISHED,RELATED -j ACCEPT -m comment --comment <span class="string">"ICMP echo-reply"</span></span><br><span class="line">$ sudo iptables -A OUTPUT -p icmp --icmp-type 0 <span class="_">-s</span> <span class="variable">$SERVER_IP</span> <span class="_">-d</span> 0/0 -m state --state ESTABLISHED,RELATED -j ACCEPT -m comment --comment <span class="string">"ICMP echo-request"</span></span><br></pre></td></tr></table></figure>
<h2 id="Add-Final-Rule"><a href="#Add-Final-Rule" class="headerlink" title="Add Final Rule"></a>Add Final Rule</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iptables -P INPUT DROP -m comment --comment <span class="string">"block/drop all remaining connections"</span></span><br></pre></td></tr></table></figure>
<h2 id="Saving-the-Configuration"><a href="#Saving-the-Configuration" class="headerlink" title="Saving the Configuration"></a>Saving the Configuration</h2><p><strong>Save the config by using the package below</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install iptables-persistent</span><br></pre></td></tr></table></figure>
<p><strong>Start the service</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service iptables-persistent start</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>Easily deploy an SSD cloud server on <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">Digital Ocean</a> in 55 seconds. Sign up using my link and receive $10.00 in free credit: <a href="https://www.digitalocean.com/?refcode=e91058dbfc7b" target="_blank" rel="external">https://www.digitalocean.com/?refcode=e91058dbfc7b</a></p>
</blockquote>
<p>– Scarlz: <a href="https://twitter.com/5car1z" target="_blank" rel="external">@5car1z</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/Debian/" class="post__tag__link">Debian</a></li><li class="post__tag__item"><a href="/tags/VPS/" class="post__tag__link">VPS</a></li><li class="post__tag__item"><a href="/tags/Wheezy/" class="post__tag__link">Wheezy</a></li></ul><a href="/2014/10/13/vps-basic-checklist/#disqus_thread" class="post__foot-link u-fr">COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2017 Scarlz</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/trades/Programming/page/7/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><span title="Next" class="page-menu__link icon-arrow-right page-menu__link--disabled"></span></li></menu></footer><script>(function(h,g,l,k,j,i){j=h.createElement(g),i=h.getElementsByTagName(g)[0],
j.src="//"+l+".disqus.com/"+k+".js",i.parentNode.insertBefore(j,i)})
(document,"script","totts","count");
</script></body></html>